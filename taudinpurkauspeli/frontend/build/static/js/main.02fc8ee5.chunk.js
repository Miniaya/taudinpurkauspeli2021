(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{206:function(e,t,n){},208:function(e){e.exports=JSON.parse('{"addCase":"Lis\xe4\xe4 case","addDifferential":"Lis\xe4\xe4 caseen uusi diffi","addDifferentialGroup":"Lis\xe4\xe4 caseen uusi diffiryhm\xe4","addNewDifferential":"Lis\xe4\xe4 uusi...","addNewDifferential2":"Luo uusi","addProcedure":"Lis\xe4\xe4 toimenpide","addDisease":"Lis\xe4\xe4 tauti","buttonEdit":"Muokkaa","buttonHideCaseFromStudents":"Piilota case opiskelijoilta","buttonShowCaseToStudents":"N\xe4yt\xe4 case opiskelijoille","buttonNewCase":"+ Lis\xe4\xe4 uusi case","buttonNewDifferential":"+ Lis\xe4\xe4 uusi diffi","buttonNewDifferentialGroup":"+ Lis\xe4\xe4 uusi diffiryhm\xe4","buttonPlay":"Pelaa","buttonRemove":"Poista","buttonRemoveAll":"Poista kaikki","buttonSaveDifferential":"Tallenna diffi","buttonSearch":"Etsi","buttonSelectCase":"Valitse case:","buttonSubmitNewCase":"Lis\xe4\xe4 case","buttonSubmitNewDifferential":"Lis\xe4\xe4","buttonSubmitNewDifferentialGroup":"Lis\xe4\xe4","buttonSubmitNewDisease":"Lis\xe4\xe4","buttonSubmitNewProcedure":"Lis\xe4\xe4 toimenpide","buttonUpdate":"P\xe4ivit\xe4","caseAnamnesis":"Anamneesi","caseDifferentials":"Diffit","caseHidden":"Opiskelijoilta piilotetut caset","casePlayable":"Pelattavissa olevat caset","caseProcedures":"Toimenpiteet","caseTitle":"Casen nimi","caseAddError":"VIRHE! Uutta casea ei voitu luoda","caseAddSuccess":"Case luotu onnistuneesti","caseUpdateError":"VIRHE! Casen p\xe4ivitt\xe4minen ep\xe4onnistui","caseUpdateSuccess":"Case p\xe4ivitetty onnistuneesti","caseTitleInstruction":"Muokattuasi otsikkoa, paina Enteria tallentaaksesi muutokset","cases":"Caset","category":"Kategoria","chooseDifferential":"Valitse diffi","clickTheDisease":"Klikkaa tautia","copy":"Kopioi","description":"Kuvaus","deleteCaseConfirmation":"Haluatko varmasti poistaa t\xe4m\xe4n casen?","Differentials":"Diffit","differentialGroupUpdateSuccess":"Diffiryhm\xe4 lis\xe4tty onnistuneesti","differentialGroupUpdateError":"VIRHE! Valittu diffiryhm\xe4 on jo aiemmin lis\xe4tty caseen.","differentialUpdateSuccess":"Diffi lis\xe4tty onnistuneesti","differentialUpdateError":"VIRHE! Valittu diffi on jo aiemmin lis\xe4tty caseen.","disease":"Tauti","diseaseAdded":"Tauti lis\xe4tty","diseases":"Taudit","edit":"Muokkaa","editCase":"Edit case","editProcedure":"Muokkaa toimenpidett\xe4","fileBank":"Tiedostopankki","frontpageTitle":"Etusivu","frontpageText":"Tervetuloa! \\n\\n Valitse alta case, jota haluat pelata. Peliohjeet l\xf6ytyv\xe4t navigointipalkista.","hideCase":"Piilota opiskelijoilta","howToPlay":"Peliohjeet","languageEnglish":"English","languageFinnish":"Suomi","listOfDiseases":"Tautilista","logOut":"Kirjaudu ulos","nameOfTheGame":"Taudinpurkauspeli","noDifferentialsYet":"Ei viel\xe4 diffej\xe4","procedureAddError":"VIRHE! Toimenpiteen lis\xe4ys ep\xe4onnistui","procedureAddSuccess":"Toimenpiteen lis\xe4ys onnistui","procedurePriority":"Toimenpiteen t\xe4rkeysaste","procedureTitle":"Toimenpiteen nimi","searchByTitle":"Etsi nimell\xe4","selectLanguage":"Valitse kieli","selectDifferentialGroup":"Valitse diffiryhm\xe4...","selectDifferential":"Valitse diffi...","selectExistingDifferential":"Hae olemassaolevaa diffi\xe4","selectExistingDifferentialGroup":"Hae olemassaolevaa diffiryhm\xe4\xe4","selectExisting":"Valitse valikosta","selectUser":"Valitse k\xe4ytt\xe4j\xe4muoto","student":"opiskelija","teacher":"opettaja","title":"Nimi","userInformation":"K\xe4ytt\xe4jien seuranta","userProfile":"K\xe4ytt\xe4j\xe4tiedot","warningShort":"Liian lyhyt","warningLong":"Liian pitk\xe4","warningRequired":"Vaadittu tieto","write":"Kirjoita..."}')},209:function(e){e.exports=JSON.parse('{"addCase":"Add case","addDifferential":"Add new differential to case","addDifferentialGroup":"Add new differential group to case","addNewDifferential":"Add new...","addNewDifferential2":"Create new","addProcedure":"Add procedure","addDisease":"Add disease","buttonEdit":"Edit","buttonHideCaseFromStudents":"Hide case from students","buttonShowCaseToStudents":"Show case to students","buttonNewCase":"+ Add new case","buttonNewDifferential":"+ Add new differential","buttonNewDifferentialGroup":"+ Add new differential group","buttonPlay":"Play","buttonRemove":"Remove","buttonRemoveAll":"Remove all","buttonSaveDifferential":"Save differential","buttonSearch":"Search","buttonSelectCase":"Select case:","buttonSubmitNewCase":"Add case","buttonSubmitNewDifferential":"Submit","buttonSubmitNewDifferentialGroup":"Submit","buttonSubmitNewDisease":"Submit","buttonSubmitNewProcedure":"Add procedure","buttonUpdate":"Update","caseAnamnesis":"Anamnesis","caseDifferentials":"Differentials","caseHidden":"Cases hidden from students","casePlayable":"Playable cases","caseProcedures":"Procedures","caseTitle":"Case title","caseTitleInstruction":"After editing the title, press Enter to save","caseAddError":"ERROR! Could not add the case","caseAddSuccess":"Case added successfully","caseUpdateError":"ERROR! Could not update case","caseUpdateSuccess":"Case was updated successfully","cases":"Cases","category":"Category","chooseDifferential":"Choose differential","clickTheDisease":"Click the disease","copy":"Copy","description":"Description","deleteCaseConfirmation":"Are you sure you want to delete this case?","Differentials":"Differentials","differentialGroupUpdateSuccess":"Differential was added successfully","differentialGroupUpdateError":"ERROR! The differential already exists in this case.","differentialUpdateSuccess":"Differential was added succesfully","differentialUpdateError":"ERROR! The differential already exists in this case.","disease":"Disease","diseases":"Diseases","diseaseAdded":"Disease added","edit":"Edit","editCase":"Edit case","editProcedure":"Edit procedure","fileBank":"Filebank","frontpageText":"Welcome! \\n \\n Select the case you want to play. The game instructions can be found in navigation bar.","frontpageTitle":"Front page","hideCase":"Hide from students","howToPlay":"How to play","languageEnglish":"English","languageFinnish":"Suomi","listOfDiseases":"List of diseases","logOut":"Log out","nameOfTheGame":"Taudinpurkauspeli","noDifferentialsYet":"No differentials yet","procedureAddError":"ERROR! Could not add a procedure","procedureAddSuccess":"Procedure added successfully","procedurePriority":"Procedure priority","procedureTitle":"Procedure title","searchByTitle":"Search by title","selectDifferential":"Select differential...","selectDifferentialGroup":"Select differential group...","selectExisting":"Select existing","selectExistingDifferential":"Select an existing differential","selectExistingDifferentialGroup":"Select an existing differential group","selectLanguage":"Select language","selectUser":"Select user in charge","student":"student","teacher":"teacher","title":"Title","userInformation":"Users","userProfile":"Profile","warningShort":"Too short","warningLong":"Too long","warningRequired":"Required information","write":"Write..."}')},342:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),r=n(38),s=n.n(r),c=n(9),o=(n(206),n(207),n(21)),d=n(356),u=n(199),l=n(354),f=n(81),j=n(358),b=n(96),h=n(95),p=n(187);b.a.use(p.a).init(),b.a.use(h.e).init({fallbackLng:"fi",lng:localStorage.getItem("i18nextLng")||"fi",resources:{fi:{translations:n(208)},en:{translations:n(209)}},ns:["translations"],defaultNS:"translations"}),b.a.languages=["fi","en"];var O=b.a,m=n(1),x=function(e){var t=e.user,n=e.admin,i=Object(j.a)().t,a=function(e){O.changeLanguage(e)};return Object(m.jsxs)(d.a,{collapseOnSelect:!0,expand:"lg",variant:"dark",sticky:"top",children:[Object(m.jsx)(d.a.Brand,{as:o.b,to:"/",children:i("nameOfTheGame")}),Object(m.jsx)(d.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(m.jsx)(d.a.Collapse,{id:"responsive-navbar-nav",children:Object(m.jsxs)(u.a,{className:"ml-auto",children:[Object(m.jsxs)(l.a,{title:i("selectLanguage"),children:[Object(m.jsx)(l.a.Item,{onClick:function(){return a("fi")},eventKey:"fi",children:i("languageFinnish")}),Object(m.jsx)(l.a.Item,{onClick:function(){return a("en")},eventKey:"en",children:i("languageEnglish")})]}),n&&Object(m.jsx)(u.a.Item,{children:Object(m.jsx)(f.a,{as:o.b,to:"/users",children:i("userInformation")})}),n&&Object(m.jsx)(u.a.Item,{children:Object(m.jsx)(f.a,{as:o.b,to:"/files",children:i("fileBank")})}),Object(m.jsx)(u.a.Item,{children:Object(m.jsx)(f.a,{as:o.b,to:"/howtoplay",children:i("howToPlay")})}),t&&Object(m.jsx)(u.a.Item,{children:Object(m.jsx)(f.a,{as:o.b,to:"/profile",children:i("userProfile")})}),Object(m.jsx)(u.a.Item,{children:Object(m.jsx)(f.a,{href:"https://taudinpurkauspeli-taudinpurkauspeli2021.apps.ocp-prod-0.k8s.it.helsinki.fi/Shibboleth.sso/Logout",children:i("logOut")})})]})})]})},g=n(16),v=n.n(g),y="/api/cases",C=null,S=function(){return v.a.get(y).then((function(e){return e.data}))},w=function(e){var t={headers:{Authorization:C}};return v.a.post(y,e,t).then((function(e){return e.data}))},D=function(e,t){return v.a.put("".concat(y,"/").concat(e),t)},k=function(e){return v.a.delete("".concat(y,"/").concat(e)).then((function(e){return e.data}))},I=function(){return Object(m.jsx)("div",{id:"sidebar"})},E=n(20),T=n(350),N=n(195),G=n(189),P=n(353),L=n(63),U=n(32),A=n(355),R=function(e){var t=e.addCase,n=Object(j.a)().t,i=U.b().shape({title:U.c().min(2,n("warningShort")).max(999,n("warningLong")).required(n("warningRequired")),anamnesis:U.c(),hidden:U.a()});return Object(m.jsx)(L.a,{initialValues:{title:"",anamnesis:"",hidden:!1},validationSchema:i,onSubmit:function(e){t({title:e.title,anamnesis:e.anamnesis,hidden:e.hidden})},children:function(e){var t=e.handleSubmit,i=e.handleChange,a=e.values,r=e.errors;return Object(m.jsxs)(A.a,{noValidate:!0,onSubmit:t,children:[Object(m.jsxs)(A.a.Group,{md:"6",controlId:"title",children:[Object(m.jsx)(A.a.Label,{children:n("caseTitle")}),Object(m.jsx)(A.a.Control,{type:"text",name:"title",value:a.title,onChange:i,isInvalid:!!r.title}),Object(m.jsx)(A.a.Control.Feedback,{type:"invalid",children:r.title})]}),Object(m.jsxs)(A.a.Group,{className:"mb-3",controlId:"anamnesis",children:[Object(m.jsx)(A.a.Label,{children:n("caseAnamnesis")}),Object(m.jsx)(A.a.Control,{as:"textarea",name:"anamnesis",rows:3,value:a.anamnesis,onChange:i})]}),Object(m.jsx)(A.a.Group,{className:"mb-3",controlId:"hidden",children:Object(m.jsx)(A.a.Check,{required:!0,name:"hidden",label:n("hideCase"),value:a.hidden,onChange:i})}),Object(m.jsx)(G.a,{type:"submit",children:n("buttonSubmitNewCase")})]})}})},B=n(139),H=(n(338),function(e){B.b.error(e,{position:"top-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0})}),F=function(e){B.b.success(e,{position:"top-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0})},V=function(){return Object(m.jsx)(B.a,{position:"top-center",autoClose:3e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!1,draggable:!1,pauseOnHover:!0})},K=function(){var e=Object(j.a)().t,t=Object(i.useState)(!1),n=Object(c.a)(t,2),a=n[0],r=n[1],s=function(){return r(!a)};return Object(m.jsxs)("div",{children:[Object(m.jsx)(G.a,{variant:"primary",onClick:s,id:"addNew",children:e("buttonNewCase")}),Object(m.jsxs)(P.a,{show:a,onHide:s,backdrop:"static",keyboard:!1,children:[Object(m.jsx)(P.a.Header,{closeButton:!0,children:Object(m.jsx)(P.a.Title,{children:e("addCase")})}),Object(m.jsx)(P.a.Body,{children:Object(m.jsx)(R,{addCase:function(t){w(t).then((function(){s(),F(e("caseAddSuccess"))})).catch((function(t){console.log(t),s(),H(e("caseAddError"))}))}})})]})]})},q=n(359),z=n(349),J=function(e){var t=e.caseToBeRemoved,n=e.removeCaseFunc,i=Object(j.a)().t;return Object(m.jsx)(G.a,{className:"removeButton",size:"sm",variant:"danger",onClick:function(e){(e.preventDefault(),null!=n)?(n(t.id),t.id=null,n(t.id)):!0===window.confirm(i("deleteCaseConfirmation"))&&k(t.id).then((function(e){return e.message}))},children:i("buttonRemove")})},M="/api/differentialsUnderCases",W=function(e){return v.a.get("".concat(M,"/").concat(e)).then((function(e){return e.data}))},Y=function(e){return v.a.post(M,e).then((function(e){return e.data}))},$="/api/proceduresUnderCases",Q=function(e){return v.a.get("".concat($,"/").concat(e)).then((function(e){return e.data}))},X=function(e){return v.a.post($,e).then((function(e){return e.data}))},Z=function(e,t){return v.a.put("".concat($,"/").concat(e),t)},_=function(e){var t=e.caseToBeCopied,n=e.createProcedures,i=e.createDifferentials,a=Object(j.a)().t,r=t.id,s=0;return Object(m.jsx)(G.a,{className:"copyButton",size:"sm",variant:"warning",onClick:function(e){e.preventDefault();var a={title:t.title,anamnesis:t.anamnesis,hidden:t.hidden};w(a).then((function(e){s=e.id})).then((function(){W(r).then((function(e){i(s,e)}))})).then((function(){Q(r).then((function(e){n(s,e)}))}))},children:a("copy")})},ee=function(e){var t=e.c,n=e.admin,i=Object(j.a)().t;return Object(m.jsxs)("div",{children:[Object(m.jsxs)(q.a,{as:o.b,to:"/cases/".concat(t.id),style:{width:"20rem",cursor:"pointer"},className:"caseCard",children:[Object(m.jsxs)(q.a.Body,{children:[Object(m.jsx)(q.a.Title,{children:t.title}),Object(m.jsx)(q.a.Text,{children:t.anamnesis})]}),Object(m.jsx)(q.a.Footer,{children:Object(m.jsx)(z.a,{className:"progsbar",variant:"success",now:25,label:"".concat(25,"%")})})]}),n&&Object(m.jsxs)("div",{className:"cardButtons",children:[Object(m.jsx)(G.a,{as:o.b,to:"/cases/".concat(t.id),className:"editButton",size:"sm",children:i("buttonEdit")}),Object(m.jsx)(_,{caseToBeCopied:t,createDifferentials:function(e,t){for(var n=0;n<t.length;n+=1){var i=t[n],a=i.id,r=i.description;Y({caseId:e,differentialId:a,description:r})}},createProcedures:function(e,t){for(var n=0;n<t.length;n+=1){var i=t[n],a=i.procedureId,r=i.priority;X({caseId:e,procedureId:a,priority:r})}}}),Object(m.jsx)(J,{caseToBeRemoved:t})]})]})},te=function(e){var t=e.newSearch,n=e.searchCases,i=Object(j.a)().t;return Object(m.jsx)("div",{children:Object(m.jsxs)("label",{htmlFor:"search",children:[i("searchByTitle"),"\xa0",Object(m.jsx)("input",{id:"search",value:t,onChange:n})]})})},ne=function(e){var t=e.cases,n=e.admin,a=Object(j.a)().t,r=Object(i.useState)(""),s=Object(c.a)(r,2),o=s[0],d=s[1],u=o?t.filter((function(e){return e.title.toLowerCase().includes(o.toLowerCase())})):t;return Object(m.jsxs)("div",{id:"wrapper",children:[Object(m.jsx)("h2",{children:a("frontpageTitle")}),Object(m.jsx)("p",{children:a("frontpageText")}),Object(m.jsx)(te,{newSearch:o,searchCases:function(e){d(e.target.value)}}),Object(m.jsx)("br",{}),n&&Object(m.jsxs)("div",{children:[Object(m.jsx)(K,{}),Object(m.jsx)("br",{}),Object(m.jsx)("h3",{children:a("caseHidden")}),Object(m.jsx)("hr",{})]}),Object(m.jsx)(T.a,{xs:"auto",md:"auto",className:"g-4",children:n&&u.filter((function(e){return e.hidden})).map((function(e){return Object(m.jsx)(N.a,{children:Object(m.jsx)(ee,{c:e,admin:n})},e.id)}))}),Object(m.jsx)("br",{}),Object(m.jsx)("h3",{children:a("casePlayable")}),Object(m.jsx)("hr",{}),Object(m.jsx)(T.a,{xs:"auto",md:"auto",className:"g-4",children:u.filter((function(e){return!e.hidden})).map((function(e){return Object(m.jsx)(N.a,{children:Object(m.jsx)(ee,{c:e,admin:n})},e.id)}))})]})},ie=function(){var e=Object(j.a)().t;return Object(m.jsx)("div",{id:"wrapper",children:Object(m.jsx)("h2",{children:e("howToPlay")})})},ae=function(){var e=Object(j.a)().t;return Object(m.jsx)("div",{id:"wrapper",children:Object(m.jsx)("h2",{children:e("userProfile")})})},re=function(){var e=Object(j.a)().t,t=Object(E.g)().id,n="/cases/".concat(t);return Object(m.jsxs)("div",{id:"wrapper",children:[Object(m.jsx)(G.a,{as:o.b,to:n,children:e("caseAnamnesis")}),Object(m.jsx)(G.a,{as:o.b,to:"".concat(n,"/procedures"),children:e("caseProcedures")}),Object(m.jsx)(G.a,{as:o.b,to:"".concat(n,"/differentials"),children:e("caseDifferentials")})]})},se=n(154),ce=n.n(se),oe=n(196),de="/api/procedures",ue=function(e){return v.a.post(de,e).then((function(e){return e.data}))},le=function(e){return v.a.get("".concat(de,"/").concat(e)).then((function(e){return e.data}))},fe=function(e,t){return v.a.put("".concat(de,"/").concat(e),t)},je=function(e){var t=e.id,n=e.addProcedureFunc,a=Object(j.a)().t,r=Object(i.useState)(""),s=Object(c.a)(r,2),o=s[0],d=s[1],u=function(){var e=Object(oe.a)(ce.a.mark((function e(i){var r,s;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.preventDefault(),r={title:o},null==n){e.next=6;break}n(r),e.next=11;break;case 6:return e.next=8,ue(r).then((function(e){return d(""),F(a("procedureAddSuccess")),e.id})).catch((function(e){console.log(e),H(a("procedureAddError"))}));case 8:s=e.sent,X({caseId:t,procedureId:s,priority:1});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:a("addProcedure")}),Object(m.jsxs)("form",{onSubmit:u,children:[Object(m.jsxs)("p",{children:[Object(m.jsx)("label",{htmlFor:"title",children:a("procedureTitle")}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{id:"title",type:"text",value:o,onChange:function(e){d(e.target.value)}})]}),Object(m.jsx)("p",{children:Object(m.jsx)("input",{type:"submit",id:"submit",value:a("buttonSubmitNewProcedure")})})]})]})},be=n(28),he=function(e){var t=e.procedure,n=e.editProcedureFunc,a=Object(i.useState)(t.proceduresUnderCase.priority),r=Object(c.a)(a,2),s=(r[0],r[1]),o=Object(i.useState)(t.title),d=Object(c.a)(o,2),u=(d[0],d[1]),l=Object(j.a)().t,f=Object(E.f)();return Object(m.jsxs)("div",{id:"wrapper",children:[Object(m.jsx)("h2",{children:l("editProcedure")}),Object(m.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),u(e.target[0].value),s(e.target[1].value);var i={caseId:t.proceduresUnderCase.caseId,procedureId:t.proceduresUnderCase.procedureId,priority:e.target[1].value},a={title:e.target[0].value};null!=n&&n(i),fe(t.id,a),Z(t.id,i),null==n&&f.push("/")}(e)},children:[Object(m.jsxs)("p",{children:[Object(m.jsx)("label",{htmlFor:"title",children:l("procedureTitle")}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{id:"title",type:"text",defaultValue:t.title,onChange:function(e){u(e.target.value)}})]}),Object(m.jsxs)("p",{children:[Object(m.jsx)("label",{htmlFor:"priority",children:l("procedurePriority")}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{id:"priority",type:"integer",onChange:function(e){s(e.target.value)},defaultValue:t.proceduresUnderCase.priority})]}),Object(m.jsx)("p",{children:Object(m.jsx)("input",{type:"submit",id:"submit",value:l("buttonEdit")})})]})]},t.proceduresUnderCase.priority)},pe=function(e){var t=e.proceduresHook,n=e.handleDragStart,i=e.handleDragEnd,a=e.handleDragEnter,r=e.t,s=e.submitForm;return t&&t.map((function(e,t){return Object(m.jsx)("h4",{onDragStart:function(e){return n(e,t)},onDragEnd:function(){return i()},onDragEnter:function(e){return a(e,t)},draggable:!0,children:Object(m.jsxs)("div",{children:[Object(m.jsxs)(G.a,{className:"procedureButton",children:[" ",e.proceduresUnderCase.priority," ",e.title," "]}),Object(m.jsx)("form",{onSubmit:function(t){return s(e,t)},className:"handleEdits",children:Object(m.jsx)(G.a,{type:"submit",className:"editButton",size:"sm",children:r("buttonEdit")},t)})]})},t)}))},Oe=function(e){var t=e.id,n=Object(j.a)().t,a=Object(i.useRef)(),r=Object(i.useRef)(),s=Object(i.useState)([]),o=Object(c.a)(s,2),d=o[0],u=o[1],l=Object(i.useState)(null),f=Object(c.a)(l,2),b=f[0],h=f[1];Object(i.useEffect)((function(){le(t).then((function(e){var t=e[0].procedures;t.sort((function(e,t){return e.proceduresUnderCase.priority-t.proceduresUnderCase.priority})),u(t)}))}),[]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(pe,{proceduresHook:d,handleDragStart:function(e,t){a.current=t},handleDragEnd:function(){d.map((function(e,t){return function(e,t){var n={caseId:e.proceduresUnderCase.caseId,procedureId:e.proceduresUnderCase.procedureId,priority:t+1};Z(e.proceduresUnderCase.procedureId,n)}(e,t)}))},handleDragEnter:function(e,t){r.current=t;var n=Object(be.a)(d),i=n[a.current];n.splice(a.current,1),n.splice(r.current,0,i),a.current=r.current,r.current=null,u(n)},t:n,submitForm:function(e,t){t.preventDefault(),function(e){h(e)}(e)}}),b?Object(m.jsx)(he,{procedure:b}):Object(m.jsx)("p",{children:" "})]})},me=function(){var e=Object(E.g)().id;return Object(m.jsxs)("div",{id:"wrapper",children:[Object(m.jsx)("p",{children:"Toimenpiteet l\xf6ytyv\xe4t t\xe4\xe4lt\xe4"}),Object(m.jsx)(je,{id:e}),Object(m.jsx)(Oe,{id:e})]})},xe="/api/differentialGroupsUnderCases",ge=function(e){return v.a.get("".concat(xe,"/").concat(e)).then((function(e){return e.data}))},ve=function(e){return v.a.post(xe,e).then((function(e){return e.data}))},ye=n(357),Ce=function(e){var t=e.id,n=e.name,i=e.description;return Object(m.jsxs)(q.a,{children:[Object(m.jsx)(ye.a.Toggle,{as:q.a.Header,eventKey:t,id:"differentialName",children:n}),Object(m.jsx)(ye.a.Collapse,{eventKey:t,children:Object(m.jsx)(q.a.Body,{children:i})})]})},Se=function(e){var t=e.diffGroupCaseId,n=Object(i.useState)([]),r=Object(c.a)(n,2),s=r[0],o=r[1];return a.a.useEffect((function(){W(t).then((function(e){o(e)})).catch((function(e){console.log(e)}))}),[]),Object(m.jsx)(ye.a,{children:s.map((function(e){return Object(m.jsx)(Ce,{id:e.id,name:e.name,description:e.description},e.id)}))})},we=n(351),De=n(352),ke="/api/differentials",Ie=function(){return v.a.get(ke).then((function(e){return e.data}))},Ee=function(e){return v.a.post(ke,e).then((function(e){return e.data}))},Te=function(e){var t=e.addDifferential,n=Object(j.a)().t,i=U.b().shape({name:U.c().min(2,n("warningShort")).max(999,n("warningLong")).required(n("warningRequired")),description:U.c()});return Object(m.jsx)(L.a,{initialValues:{name:"",description:""},validationSchema:i,onSubmit:function(e){t({name:e.name,description:e.description})},children:function(e){var t=e.handleSubmit,i=e.handleChange,a=e.values,r=e.errors;return Object(m.jsxs)(A.a,{noValidate:!0,onSubmit:t,children:[Object(m.jsxs)(A.a.Group,{md:"6",controlId:"name",children:[Object(m.jsx)(A.a.Label,{children:n("addDifferential")}),Object(m.jsx)(A.a.Control,{type:"text",name:"name",placeholder:n("write"),value:a.name,onChange:i,isInvalid:!!r.name}),Object(m.jsx)(A.a.Control.Feedback,{type:"invalid",role:"alert","aria-label":"from feedback",children:r.name})]}),Object(m.jsxs)(A.a.Group,{className:"mb-3",controlId:"description",children:[Object(m.jsx)(A.a.Label,{children:n("description")}),Object(m.jsx)(A.a.Control,{as:"textarea",name:"description",rows:3,value:a.description,onChange:i})]}),Object(m.jsx)(G.a,{type:"submit",children:n("buttonSubmitNewDifferential")})]})}})},Ne=n(134),Ge=function(e){var t=e.differentials,n=e.selectDifferential,a=e.diffGroupCaseId,r=Object(j.a)().t,s=Object(i.useState)([]),o=Object(c.a)(s,2),d=o[0],u=o[1],l=Object(i.useState)(""),f=Object(c.a)(l,2),b=f[0],h=f[1];return Object(m.jsxs)(A.a,{onSubmit:function(e){e.preventDefault();var i=t.filter((function(e){return e.name===d[0]}))[0];n({diffGroupCaseId:a,differentialId:i.id,description:b}),h(""),u([])},children:[Object(m.jsxs)(A.a.Group,{children:[Object(m.jsx)(A.a.Label,{children:r("selectExistingDifferential")}),Object(m.jsx)(Ne.a,{id:"basic-typeahead-single",labelKey:"name",options:t.map((function(e){return e.name})),placeholder:r("selectDifferential"),onChange:u,selected:d})]}),Object(m.jsxs)(A.a.Group,{className:"mb-3",controlId:"description",children:[Object(m.jsx)(A.a.Label,{children:r("description")}),Object(m.jsx)(A.a.Control,{as:"textarea",name:"description",rows:3,value:b,onChange:function(e){return h(e.target.value)}})]}),Object(m.jsx)(G.a,{type:"submit",children:r("buttonSubmitNewDifferential")})]})},Pe=function(e){var t=e.diffGroupCaseId,n=Object(j.a)().t,r=Object(i.useState)(!1),s=Object(c.a)(r,2),o=s[0],d=s[1],u=Object(i.useState)([]),l=Object(c.a)(u,2),f=l[0],b=l[1];a.a.useEffect((function(){Ie().then((function(e){b(e)})).catch((function(e){console.log(e)}))}),[]);var h=function(){return d(!o)},p=function(e){Y(e).then((function(){h(),F(n("differentialUpdateSuccess"))})).catch((function(e){console.log(e),h(),H(n("differentialUpdateError"))}))};return Object(m.jsxs)("div",{id:"newDifferential",children:[Object(m.jsx)(G.a,{variant:"primary",onClick:h,id:"addNew",children:n("buttonNewDifferential")}),Object(m.jsxs)(P.a,{show:o,onHide:h,backdrop:"static",keyboard:!1,children:[Object(m.jsx)(P.a.Header,{closeButton:!0,children:Object(m.jsx)(P.a.Title,{children:n("addDifferential")})}),Object(m.jsx)(P.a.Body,{children:Object(m.jsxs)(we.a,{defaultActiveKey:"select",id:"differentials",className:"mb-3",children:[Object(m.jsx)(De.a,{eventKey:"select",title:n("selectExisting"),children:Object(m.jsx)(Ge,{differentials:f,selectDifferential:p,diffGroupCaseId:t})}),Object(m.jsx)(De.a,{eventKey:"add",title:n("addNewDifferential2"),children:Object(m.jsx)(Te,{addDifferential:function(e){Ee({name:e.name}).then((function(n){var i=n[0].id;p({diffGroupCaseId:t,differentialId:i,description:e.description})}))}})})]})})]})]})},Le=function(e){var t=e.diffGroupCaseId,n=e.name,i=e.admin;return Object(m.jsxs)(q.a,{style:{width:"60rem"},children:[Object(m.jsx)(q.a.Header,{children:n}),Object(m.jsxs)(q.a.Body,{children:[Object(m.jsx)(Se,{diffGroupCaseId:t}),i&&Object(m.jsx)(Pe,{diffGroupCaseId:t})]})]})},Ue=function(e){var t=e.caseId,n=e.admin,r=Object(i.useState)([]),s=Object(c.a)(r,2),o=s[0],d=s[1];return a.a.useEffect((function(){ge(t).then((function(e){d(e)})).catch((function(e){console.log(e)}))}),[]),Object(m.jsx)("div",{"data-testid":"diffGroupList",children:o.map((function(e){return Object(m.jsx)(Le,{diffGroupCaseId:e.diffGroupCaseId,name:e.name,admin:n},e.id)}))})},Ae="/api/differentialGroups",Re=function(){return v.a.get(Ae).then((function(e){return e.data}))},Be=function(e){return v.a.post(Ae,e).then((function(e){return e.data}))},He=function(e){var t=e.addDifferentialGroup,n=Object(j.a)().t,i=U.b().shape({name:U.c().min(2,n("warningShort")).max(999,n("warningLong")).required(n("warningRequired"))});return Object(m.jsx)(L.a,{initialValues:{name:""},validationSchema:i,onSubmit:function(e){t({name:e.name})},children:function(e){var t=e.handleSubmit,i=e.handleChange,a=e.values,r=e.errors;return Object(m.jsxs)(A.a,{noValidate:!0,onSubmit:t,children:[Object(m.jsxs)(A.a.Group,{md:"6",controlId:"name",children:[Object(m.jsx)(A.a.Label,{children:n("addDifferentialGroup")}),Object(m.jsx)(A.a.Control,{type:"text",name:"name",placeholder:n("write"),value:a.name,onChange:i,isInvalid:!!r.name}),Object(m.jsx)(A.a.Control.Feedback,{type:"invalid",role:"alert","aria-label":"from feedback",children:r.name})]}),Object(m.jsx)(G.a,{type:"submit",children:n("buttonSubmitNewDifferentialGroup")})]})}})},Fe=function(e){var t=e.differentialGroups,n=e.selectDifferentialGroup,a=e.caseId,r=Object(j.a)().t,s=Object(i.useState)([]),o=Object(c.a)(s,2),d=o[0],u=o[1];return Object(m.jsxs)(A.a,{onSubmit:function(e){e.preventDefault();var i=t.filter((function(e){return e.name===d[0]}))[0];n({caseId:a,differentialGroupId:i.id}),u([])},children:[Object(m.jsxs)(A.a.Group,{children:[Object(m.jsx)(A.a.Label,{children:r("selectExistingDifferentialGroup")}),Object(m.jsx)(Ne.a,{id:"basic-typeahead-single",labelKey:"name",options:t.map((function(e){return e.name})),placeholder:r("selectDifferentialGroup"),onChange:u,selected:d})]}),Object(m.jsx)(G.a,{type:"submit",children:r("buttonSubmitNewDifferentialGroup")})]})},Ve=function(e){var t=e.caseId,n=Object(j.a)().t,r=Object(i.useState)(!1),s=Object(c.a)(r,2),o=s[0],d=s[1],u=Object(i.useState)([]),l=Object(c.a)(u,2),f=l[0],b=l[1];a.a.useEffect((function(){Re().then((function(e){b(e)})).catch((function(e){console.log(e)}))}),[]);var h=function(){return d(!o)},p=function(e){ve(e).then((function(){h(),F(n("differentialGroupUpdateSuccess"))})).catch((function(e){console.log(e),h(),H(n("differentialGroupUpdateError"))}))};return Object(m.jsxs)("div",{children:[Object(m.jsx)(G.a,{variant:"primary",onClick:h,id:"addNew",children:n("buttonNewDifferentialGroup")}),Object(m.jsxs)(P.a,{show:o,onHide:h,backdrop:"static",keyboard:!1,children:[Object(m.jsx)(P.a.Header,{closeButton:!0,children:Object(m.jsx)(P.a.Title,{children:n("addDifferentialGroup")})}),Object(m.jsx)(P.a.Body,{children:Object(m.jsxs)(we.a,{defaultActiveKey:"select",id:"differentialGroups",className:"mb-3",children:[Object(m.jsx)(De.a,{eventKey:"select",title:n("selectExisting"),children:Object(m.jsx)(Fe,{differentialGroups:f,selectDifferentialGroup:p,caseId:t})}),Object(m.jsx)(De.a,{eventKey:"add",title:n("addNewDifferential2"),children:Object(m.jsx)(He,{addDifferentialGroup:function(e){Be({name:e.name}).then((function(e){var n=e[0].id;p({caseId:t,differentialGroupId:n})}))}})})]})})]})]})},Ke=function(e){var t=e.admin,n=Object(j.a)().t,i=Object(E.g)().id;return Object(m.jsxs)("div",{id:"wrapper",children:[Object(m.jsx)("h2",{children:n("Differentials")}),t&&Object(m.jsx)("div",{children:Object(m.jsx)(Ve,{caseId:i})}),Object(m.jsx)(Ue,{caseId:i,admin:t})]})},qe=function(e){var t=e.c,n=e.hideCase,a=Object(j.a)().t,r=Object(i.useState)(t.hidden),s=Object(c.a)(r,2),o=s[0],d=s[1];return Object(m.jsx)("div",{children:Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n({title:t.title,anamnesis:t.anamnesis,hidden:o})},className:"buttonLeft",children:[Object(m.jsx)("label",{htmlFor:"submit",className:"hidden",children:a(o?"buttonShowCaseToStudents":"buttonHideCaseFromStudents")}),Object(m.jsx)("input",{type:"submit",onClick:function(){d(!o)},id:"submit",value:a(o?"buttonShowCaseToStudents":"buttonHideCaseFromStudents")})]})})},ze=function(e){var t=e.c,n=e.updateCaseTitle,a=Object(j.a)().t,r=Object(i.useState)(t.title),s=Object(c.a)(r,2),o=s[0],d=s[1],u=U.b().shape({title:U.c().min(2,a("warningShort")).max(999,a("warningLong")).required(a("warningRequired"))});return Object(m.jsx)(L.a,{initialValues:{title:o},validationSchema:u,onSubmit:function(e){n({title:e.title,anamnesis:t.anamnesis,hidden:t.hidden}),d(e.title)},children:function(e){var t=e.handleSubmit,n=e.handleChange,i=e.values,r=e.errors;return Object(m.jsx)(A.a,{noValidate:!0,onSubmit:t,children:Object(m.jsxs)(A.a.Group,{className:"mb-3",controlId:"updateTitle",style:{width:"30rem"},children:[Object(m.jsx)(A.a.Control,{type:"text",name:"title",value:i.title,onChange:n,isInvalid:!!r.title}),Object(m.jsx)(A.a.Text,{className:"text-muted",children:a("caseTitleInstruction")}),Object(m.jsx)(A.a.Control.Feedback,{type:"invalid",role:"alert","aria-label":"from feedback",children:r.title})]})})}})},Je=function(e){var t=e.cases,n=e.admin,a=Object(j.a)().t,r=Object(E.g)().id,s=t.find((function(e){return e.id===Number(r)})),o=Object(i.useState)(s),d=Object(c.a)(o,2),u=(d[0],d[1]),l=function(e){D(s.id,e).then((function(){u(e),F(a("caseUpdateSuccess"))})).catch((function(e){console.log(e),H(a("caseUpdateError"))}))};return Object(m.jsxs)("div",{id:"wrapper",children:[Object(m.jsx)("p",{children:"Casen tiedot l\xf6ytyv\xe4t t\xe4\xe4lt\xe4"}),n&&s&&Object(m.jsxs)("div",{children:[Object(m.jsx)(ze,{c:s,updateCaseTitle:l}),Object(m.jsx)(qe,{c:s,hideCase:l})]}),!n&&s&&Object(m.jsx)("p",{children:s.title}),s&&Object(m.jsx)("p",{children:s.anamnesis})]})},Me=function(e){var t=e.admin,n=e.cases;return Object(m.jsxs)(E.c,{children:[Object(m.jsx)(E.a,{path:"/howtoplay",children:Object(m.jsx)(ie,{})}),Object(m.jsx)(E.a,{path:"/profile",children:Object(m.jsx)(ae,{})}),Object(m.jsxs)(E.a,{path:"/cases/:id/procedures",children:[Object(m.jsx)(re,{cases:n,admin:t}),Object(m.jsx)(me,{})]}),Object(m.jsxs)(E.a,{path:"/cases/:id/differentials",children:[Object(m.jsx)(re,{cases:n,admin:t}),Object(m.jsx)(Ke,{admin:t})]}),Object(m.jsxs)(E.a,{path:"/cases/:id",children:[Object(m.jsx)(re,{cases:n,admin:t}),Object(m.jsx)(Je,{cases:n,admin:t})]}),Object(m.jsx)(E.a,{path:"/",children:Object(m.jsx)(ne,{admin:t,cases:n})})]})},We=function(){var e=Object(i.useState)(null),t=Object(c.a)(e,2),n=t[0],r=t[1],s=Object(i.useState)(!1),d=Object(c.a)(s,2),u=d[0],l=d[1],f=Object(i.useState)([]),j=Object(c.a)(f,2),b=j[0],h=j[1];return a.a.useEffect((function(){S().then((function(e){console.log(e),l(e.admin),r(e.name),h(e.data),console.log(n)})).catch((function(e){console.log(e)}))}),[]),Object(m.jsxs)(o.a,{children:[Object(m.jsx)(x,{user:!1,admin:u,cases:b}),Object(m.jsx)(I,{}),Object(m.jsx)(V,{}),Object(m.jsx)(Me,{cases:b,admin:u})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(m.jsx)(We,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[342,1,2]]]);
//# sourceMappingURL=main.02fc8ee5.chunk.js.map