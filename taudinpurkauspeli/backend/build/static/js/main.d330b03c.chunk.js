(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{206:function(e,t,n){},208:function(e){e.exports=JSON.parse('{"addCase":"Lis\xe4\xe4 case","addDifferential":"Lis\xe4\xe4 caseen uusi diffi","addDifferentialGroup":"Lis\xe4\xe4 caseen uusi diffiryhm\xe4","addNewDifferential":"Lis\xe4\xe4 uusi...","addNewDifferential2":"Luo uusi","addProcedure":"Lis\xe4\xe4 toimenpide","addDisease":"Lis\xe4\xe4 tauti","buttonEdit":"Muokkaa","buttonHideCaseFromStudents":"Piilota case opiskelijoilta","buttonShowCaseToStudents":"N\xe4yt\xe4 case opiskelijoille","buttonNewCase":"+ Lis\xe4\xe4 uusi case","buttonNewDifferential":"+ Lis\xe4\xe4 uusi diffi","buttonNewDifferentialGroup":"+ Lis\xe4\xe4 uusi diffiryhm\xe4","buttonPlay":"Pelaa","buttonRemove":"Poista","buttonRemoveAll":"Poista kaikki","buttonSaveDifferential":"Tallenna diffi","buttonSearch":"Etsi","buttonSelectCase":"Valitse case:","buttonSubmitNewCase":"Lis\xe4\xe4 case","buttonSubmitNewDifferential":"Lis\xe4\xe4","buttonSubmitNewDifferentialGroup":"Lis\xe4\xe4","buttonSubmitNewDisease":"Lis\xe4\xe4","buttonSubmitNewProcedure":"Lis\xe4\xe4 toimenpide","buttonUpdate":"P\xe4ivit\xe4","caseAnamnesis":"Anamneesi","caseDifferentials":"Diffit","caseHidden":"Opiskelijoilta piilotetut caset","casePlayable":"Pelattavissa olevat caset","caseProcedures":"Toimenpiteet","caseTitle":"Casen nimi","caseAddError":"VIRHE! Uutta casea ei voitu luoda","caseAddSuccess":"Case luotu onnistuneesti","caseUpdateError":"VIRHE! Casen p\xe4ivitt\xe4minen ep\xe4onnistui","caseUpdateSuccess":"Case p\xe4ivitetty onnistuneesti","caseTitleInstruction":"Muokattuasi otsikkoa, paina Enteria tallentaaksesi muutokset","cases":"Caset","category":"Kategoria","chooseDifferential":"Valitse diffi","clickTheDisease":"Klikkaa tautia","copy":"Kopioi","description":"Kuvaus","deleteCaseConfirmation":"Haluatko varmasti poistaa t\xe4m\xe4n casen?","Differentials":"Diffit","differentialGroupUpdateSuccess":"Diffiryhm\xe4 lis\xe4tty onnistuneesti","differentialGroupUpdateError":"VIRHE! Valittu diffiryhm\xe4 on jo aiemmin lis\xe4tty caseen.","differentialUpdateSuccess":"Diffi lis\xe4tty onnistuneesti","differentialUpdateError":"VIRHE! Valittu diffi on jo aiemmin lis\xe4tty caseen.","disease":"Tauti","diseaseAdded":"Tauti lis\xe4tty","diseases":"Taudit","edit":"Muokkaa","editCase":"Edit case","editProcedure":"Muokkaa toimenpidett\xe4","fileBank":"Tiedostopankki","frontpageTitle":"Etusivu","frontpageText":"Tervetuloa! \\n\\n Valitse alta case, jota haluat pelata. Peliohjeet l\xf6ytyv\xe4t navigointipalkista.","guest":"vierailija","GuestFrontpageText":"T\xe4m\xe4 on el\xe4inl\xe4\xe4ketieteellisen tiedekunnan epidemiologian kurssin taudinpurkauspelin etusivu. \\n Peliohjeet l\xf6ytyv\xe4t peliohjeet-linkin takaa. Mik\xe4li haluat pelata peli\xe4, kirjaudu sis\xe4\xe4n yliopiston k\xe4ytt\xe4j\xe4tunnuksilla!","GuestFrontpageTitle":"Tervetuloa taudinpurkauspelin pariin!","hideCase":"Piilota opiskelijoilta","howToPlay":"Peliohjeet","languageEnglish":"English","languageFinnish":"Suomi","listOfDiseases":"Tautilista","logIn":"Kirjaudu sis\xe4\xe4n","logOut":"Kirjaudu ulos","nameOfTheGame":"Taudinpurkauspeli","noDifferentialsYet":"Ei viel\xe4 diffej\xe4","procedureAddError":"VIRHE! Toimenpiteen lis\xe4ys ep\xe4onnistui","procedureAddSuccess":"Toimenpiteen lis\xe4ys onnistui","procedurePriority":"Toimenpiteen t\xe4rkeysaste","procedureTitle":"Toimenpiteen nimi","searchByTitle":"Etsi nimell\xe4","selectLanguage":"Valitse kieli","selectDifferentialGroup":"Valitse diffiryhm\xe4...","selectDifferential":"Valitse diffi...","selectExistingDifferential":"Hae olemassaolevaa diffi\xe4","selectExistingDifferentialGroup":"Hae olemassaolevaa diffiryhm\xe4\xe4","selectExisting":"Valitse valikosta","selectUser":"Valitse k\xe4ytt\xe4j\xe4muoto","student":"opiskelija","teacher":"opettaja","title":"Nimi","userInformation":"K\xe4ytt\xe4jien seuranta","userProfile":"K\xe4ytt\xe4j\xe4tiedot","warningShort":"Liian lyhyt","warningLong":"Liian pitk\xe4","warningRequired":"Vaadittu tieto","write":"Kirjoita..."}')},209:function(e){e.exports=JSON.parse('{"addCase":"Add case","addDifferential":"Add new differential to case","addDifferentialGroup":"Add new differential group to case","addNewDifferential":"Add new...","addNewDifferential2":"Create new","addProcedure":"Add procedure","addDisease":"Add disease","buttonEdit":"Edit","buttonHideCaseFromStudents":"Hide case from students","buttonShowCaseToStudents":"Show case to students","buttonNewCase":"+ Add new case","buttonNewDifferential":"+ Add new differential","buttonNewDifferentialGroup":"+ Add new differential group","buttonPlay":"Play","buttonRemove":"Remove","buttonRemoveAll":"Remove all","buttonSaveDifferential":"Save differential","buttonSearch":"Search","buttonSelectCase":"Select case:","buttonSubmitNewCase":"Add case","buttonSubmitNewDifferential":"Submit","buttonSubmitNewDifferentialGroup":"Submit","buttonSubmitNewDisease":"Submit","buttonSubmitNewProcedure":"Add procedure","buttonUpdate":"Update","caseAnamnesis":"Anamnesis","caseDifferentials":"Differentials","caseHidden":"Cases hidden from students","casePlayable":"Playable cases","caseProcedures":"Procedures","caseTitle":"Case title","caseTitleInstruction":"After editing the title, press Enter to save","caseAddError":"ERROR! Could not add the case","caseAddSuccess":"Case added successfully","caseUpdateError":"ERROR! Could not update case","caseUpdateSuccess":"Case was updated successfully","cases":"Cases","category":"Category","chooseDifferential":"Choose differential","clickTheDisease":"Click the disease","copy":"Copy","description":"Description","deleteCaseConfirmation":"Are you sure you want to delete this case?","Differentials":"Differentials","differentialGroupUpdateSuccess":"Differential was added successfully","differentialGroupUpdateError":"ERROR! The differential already exists in this case.","differentialUpdateSuccess":"Differential was added succesfully","differentialUpdateError":"ERROR! The differential already exists in this case.","disease":"Disease","diseases":"Diseases","diseaseAdded":"Disease added","edit":"Edit","editCase":"Edit case","editProcedure":"Edit procedure","fileBank":"Filebank","frontpageText":"Welcome! \\n \\n Select the case you want to play. The game instructions can be found in navigation bar.","frontpageTitle":"Front page","guest":"guest","GuestFrontpageText":"This is the veterinary faculty\'s epidemiology courses taudinpurkaus-games frontpage. \\n The instructions can be found behind the game instructions link. If you want to play the game, sign in with your university log-in details!","GuestFrontpageTitle":"Welcome to Taudinpurkauspeli!","hideCase":"Hide from students","howToPlay":"How to play","languageEnglish":"English","languageFinnish":"Suomi","listOfDiseases":"List of diseases","logIn":"Log in","logOut":"Log out","nameOfTheGame":"Taudinpurkauspeli","noDifferentialsYet":"No differentials yet","procedureAddError":"ERROR! Could not add a procedure","procedureAddSuccess":"Procedure added successfully","procedurePriority":"Procedure priority","procedureTitle":"Procedure title","searchByTitle":"Search by title","selectDifferential":"Select differential...","selectDifferentialGroup":"Select differential group...","selectExisting":"Select existing","selectExistingDifferential":"Select an existing differential","selectExistingDifferentialGroup":"Select an existing differential group","selectLanguage":"Select language","selectUser":"Select user in charge","student":"student","teacher":"teacher","title":"Title","userInformation":"Users","userProfile":"Profile","warningShort":"Too short","warningLong":"Too long","warningRequired":"Required information","write":"Write..."}')},342:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),r=n(38),c=n.n(r),s=n(19),o=n(9),d=(n(206),n(207),n(21)),l=n(356),u=n(199),j=n(354),f=n(81),b=n(358),h=n(96),p=n(95),O=n(187);h.a.use(O.a).init(),h.a.use(p.e).init({fallbackLng:"fi",lng:localStorage.getItem("i18nextLng")||"fi",resources:{fi:{translations:n(208)},en:{translations:n(209)}},ns:["translations"],defaultNS:"translations"}),h.a.languages=["fi","en"];var m=h.a,x=n(1),g=function(e){var t=e.user,n=e.admin,i=e.guest,a=e.changeUser,r=e.changeAdmin,c=e.changeGuest,o=Object(b.a)().t,d=function(e){m.changeLanguage(e)};return Object(x.jsxs)(l.a,{collapseOnSelect:!0,expand:"lg",variant:"dark",sticky:"top",children:[Object(x.jsx)(l.a.Brand,{as:s.b,to:"/",children:o("nameOfTheGame")}),Object(x.jsx)(l.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(x.jsx)(l.a.Collapse,{id:"responsive-navbar-nav",children:Object(x.jsxs)(u.a,{className:"ml-auto",children:[Object(x.jsxs)(j.a,{title:o("selectUser"),children:[Object(x.jsx)(j.a.Item,{onClick:function(){return c()},eventKey:"guest",children:o("guest")}),Object(x.jsx)(j.a.Item,{onClick:function(){return a()},eventKey:"student",children:o("student")}),Object(x.jsx)(j.a.Item,{onClick:function(){return r()},eventKey:"teacher",children:o("teacher")})]}),Object(x.jsxs)(j.a,{title:o("selectLanguage"),children:[Object(x.jsx)(j.a.Item,{onClick:function(){return d("fi")},eventKey:"fi",children:o("languageFinnish")}),Object(x.jsx)(j.a.Item,{onClick:function(){return d("en")},eventKey:"en",children:o("languageEnglish")})]}),n&&Object(x.jsx)(u.a.Item,{children:Object(x.jsx)(f.a,{as:s.b,to:"/users",children:o("userInformation")})}),n&&Object(x.jsx)(u.a.Item,{children:Object(x.jsx)(f.a,{as:s.b,to:"/files",children:o("fileBank")})}),(t||i||n)&&Object(x.jsx)(u.a.Item,{children:Object(x.jsx)(f.a,{as:s.b,to:"/howtoplay",children:o("howToPlay")})}),t&&Object(x.jsx)(u.a.Item,{children:Object(x.jsx)(f.a,{as:s.b,to:"/profile",children:o("userProfile")})}),Object(x.jsx)(u.a.Item,{children:t||n?Object(x.jsx)(f.a,{as:s.b,to:"/logout",children:o("logOut")}):Object(x.jsx)(f.a,{as:s.b,to:"/login",children:o("logIn")})})]})})]})},v=n(16),y=n.n(v),C="http://localhost:8081/api/cases",S=function(){return y.a.get(C).then((function(e){return console.log("frontend headers",e.headers),e.data}))},w=function(e){return y.a.post(C,e).then((function(e){return e.data}))},D=function(e,t){return y.a.put("".concat(C,"/").concat(e),t)},k=function(e){return y.a.delete("".concat(C,"/").concat(e)).then((function(e){return e.data}))},I=n(350),T=n(195),E=n(189),G=n(353),N=n(63),P=n(32),L=n(355),U=function(e){var t=e.addCase,n=Object(b.a)().t,i=P.b().shape({title:P.c().min(2,n("warningShort")).max(999,n("warningLong")).required(n("warningRequired")),anamnesis:P.c(),hidden:P.a()});return Object(x.jsx)(N.a,{initialValues:{title:"",anamnesis:"",hidden:!1},validationSchema:i,onSubmit:function(e){t({title:e.title,anamnesis:e.anamnesis,hidden:e.hidden})},children:function(e){var t=e.handleSubmit,i=e.handleChange,a=e.values,r=e.errors;return Object(x.jsxs)(L.a,{noValidate:!0,onSubmit:t,children:[Object(x.jsxs)(L.a.Group,{md:"6",controlId:"title",children:[Object(x.jsx)(L.a.Label,{children:n("caseTitle")}),Object(x.jsx)(L.a.Control,{type:"text",name:"title",value:a.title,onChange:i,isInvalid:!!r.title}),Object(x.jsx)(L.a.Control.Feedback,{type:"invalid",children:r.title})]}),Object(x.jsxs)(L.a.Group,{className:"mb-3",controlId:"anamnesis",children:[Object(x.jsx)(L.a.Label,{children:n("caseAnamnesis")}),Object(x.jsx)(L.a.Control,{as:"textarea",name:"anamnesis",rows:3,value:a.anamnesis,onChange:i})]}),Object(x.jsx)(L.a.Group,{className:"mb-3",controlId:"hidden",children:Object(x.jsx)(L.a.Check,{required:!0,name:"hidden",label:n("hideCase"),value:a.hidden,onChange:i})}),Object(x.jsx)(E.a,{type:"submit",children:n("buttonSubmitNewCase")})]})}})},A=n(139),R=(n(338),function(e){A.b.error(e,{position:"top-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0})}),F=function(e){A.b.success(e,{position:"top-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0})},B=function(){return Object(x.jsx)(A.a,{position:"top-center",autoClose:3e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!1,draggable:!1,pauseOnHover:!0})},H=function(){var e=Object(b.a)().t,t=Object(i.useState)(!1),n=Object(o.a)(t,2),a=n[0],r=n[1],c=function(){return r(!a)};return Object(x.jsxs)("div",{children:[Object(x.jsx)(E.a,{variant:"primary",onClick:c,id:"addNew",children:e("buttonNewCase")}),Object(x.jsxs)(G.a,{show:a,onHide:c,backdrop:"static",keyboard:!1,children:[Object(x.jsx)(G.a.Header,{closeButton:!0,children:Object(x.jsx)(G.a.Title,{children:e("addCase")})}),Object(x.jsx)(G.a.Body,{children:Object(x.jsx)(U,{addCase:function(t){w(t).then((function(){c(),F(e("caseAddSuccess"))})).catch((function(t){console.log(t),c(),R(e("caseAddError"))}))}})})]})]})},V=n(359),K=n(349),q=function(e){var t=e.caseToBeRemoved,n=e.removeCaseFunc,i=Object(b.a)().t;return Object(x.jsx)(E.a,{className:"removeButton",size:"sm",variant:"danger",onClick:function(e){(e.preventDefault(),null!=n)?(n(t.id),t.id=null,n(t.id)):!0===window.confirm(i("deleteCaseConfirmation"))&&k(t.id).then((function(e){return e.message}))},children:i("buttonRemove")})},M="http://localhost:8081/api/differentialsUnderCases",W=function(e){return y.a.get("".concat(M,"/").concat(e)).then((function(e){return e.data}))},z=function(e){return y.a.post(M,e).then((function(e){return e.data}))},J="http://localhost:8081/api/proceduresUnderCases",Y=function(e){return y.a.get("".concat(J,"/").concat(e)).then((function(e){return e.data}))},$=function(e){return y.a.post(J,e).then((function(e){return e.data}))},Q=function(e,t){return y.a.put("".concat(J,"/").concat(e),t)},X=function(e){var t=e.caseToBeCopied,n=e.createProcedures,i=e.createDifferentials,a=Object(b.a)().t,r=t.id,c=0;return Object(x.jsx)(E.a,{className:"copyButton",size:"sm",variant:"warning",onClick:function(e){e.preventDefault();var a={title:t.title,anamnesis:t.anamnesis,hidden:t.hidden};w(a).then((function(e){c=e.id})).then((function(){W(r).then((function(e){i(c,e)}))})).then((function(){Y(r).then((function(e){n(c,e)}))}))},children:a("copy")})},Z=function(e){var t=e.c,n=e.admin,i=Object(b.a)().t;return Object(x.jsxs)("div",{children:[Object(x.jsxs)(V.a,{as:s.b,to:"/cases/".concat(t.id),style:{width:"20rem",cursor:"pointer"},className:"caseCard",children:[Object(x.jsxs)(V.a.Body,{children:[Object(x.jsx)(V.a.Title,{children:t.title}),Object(x.jsx)(V.a.Text,{children:t.anamnesis})]}),Object(x.jsx)(V.a.Footer,{children:Object(x.jsx)(K.a,{className:"progsbar",variant:"success",now:25,label:"".concat(25,"%")})})]}),n&&Object(x.jsxs)("div",{className:"cardButtons",children:[Object(x.jsx)(E.a,{as:s.b,to:"/cases/".concat(t.id),className:"editButton",size:"sm",children:i("buttonEdit")}),Object(x.jsx)(X,{caseToBeCopied:t,createDifferentials:function(e,t){for(var n=0;n<t.length;n+=1){var i=t[n],a=i.id,r=i.description;z({caseId:e,differentialId:a,description:r})}},createProcedures:function(e,t){for(var n=0;n<t.length;n+=1){var i=t[n],a=i.procedureId,r=i.priority;$({caseId:e,procedureId:a,priority:r})}}}),Object(x.jsx)(q,{caseToBeRemoved:t})]})]})},_=function(e){var t=e.newSearch,n=e.searchCases,i=Object(b.a)().t;return Object(x.jsx)("div",{children:Object(x.jsxs)("label",{htmlFor:"search",children:[i("searchByTitle"),"\xa0",Object(x.jsx)("input",{id:"search",value:t,onChange:n})]})})},ee=function(e){var t=e.cases,n=e.admin,a=Object(b.a)().t,r=Object(i.useState)(""),c=Object(o.a)(r,2),s=c[0],d=c[1],l=s?t.filter((function(e){return e.title.toLowerCase().includes(s.toLowerCase())})):t;return Object(x.jsxs)("div",{id:"wrapper",children:[Object(x.jsx)("h2",{children:a("frontpageTitle")}),Object(x.jsx)("p",{children:a("frontpageText")}),Object(x.jsx)(_,{newSearch:s,searchCases:function(e){d(e.target.value)}}),Object(x.jsx)("br",{}),n&&Object(x.jsxs)("div",{children:[Object(x.jsx)(H,{}),Object(x.jsx)("br",{}),Object(x.jsx)("h3",{children:a("caseHidden")}),Object(x.jsx)("hr",{})]}),Object(x.jsx)(I.a,{xs:"auto",md:"auto",className:"g-4",children:n&&l.filter((function(e){return e.hidden})).map((function(e){return Object(x.jsx)(T.a,{children:Object(x.jsx)(Z,{c:e,admin:n})},e.id)}))}),Object(x.jsx)("br",{}),Object(x.jsx)("h3",{children:a("casePlayable")}),Object(x.jsx)("hr",{}),Object(x.jsx)(I.a,{xs:"auto",md:"auto",className:"g-4",children:l.filter((function(e){return!e.hidden})).map((function(e){return Object(x.jsx)(T.a,{children:Object(x.jsx)(Z,{c:e,admin:n})},e.id)}))})]})},te=function(){var e=Object(b.a)().t;return Object(x.jsxs)("div",{id:"wrapper",children:[Object(x.jsx)("h2",{children:e("GuestFrontpageTitle")}),Object(x.jsx)("p",{children:e("GuestFrontpageText")})]})},ne=function(){return Object(x.jsx)("div",{id:"sidebar"})},ie=function(){var e=Object(b.a)().t;return Object(x.jsx)("div",{id:"wrapper",children:Object(x.jsx)("h2",{children:e("howToPlay")})})},ae=function(){var e=Object(b.a)().t;return Object(x.jsx)("div",{id:"wrapper",children:Object(x.jsx)("h2",{children:e("userProfile")})})},re="http://localhost:8081/api/differentialGroupsUnderCases",ce=function(e){return y.a.get("".concat(re,"/").concat(e)).then((function(e){return e.data}))},se=function(e){return y.a.post(re,e).then((function(e){return e.data}))},oe=n(357),de=function(e){var t=e.id,n=e.name,i=e.description;return Object(x.jsxs)(V.a,{children:[Object(x.jsx)(oe.a.Toggle,{as:V.a.Header,eventKey:t,id:"differentialName",children:n}),Object(x.jsx)(oe.a.Collapse,{eventKey:t,children:Object(x.jsx)(V.a.Body,{children:i})})]})},le=function(e){var t=e.diffGroupCaseId,n=Object(i.useState)([]),r=Object(o.a)(n,2),c=r[0],s=r[1];return a.a.useEffect((function(){W(t).then((function(e){s(e)})).catch((function(e){console.log(e)}))}),[]),Object(x.jsx)(oe.a,{children:c.map((function(e){return Object(x.jsx)(de,{id:e.id,name:e.name,description:e.description},e.id)}))})},ue=n(351),je=n(352),fe="http://localhost:8081/api/differentials",be=function(){return y.a.get(fe).then((function(e){return e.data}))},he=function(e){return y.a.post(fe,e).then((function(e){return e.data}))},pe=function(e){var t=e.addDifferential,n=Object(b.a)().t,i=P.b().shape({name:P.c().min(2,n("warningShort")).max(999,n("warningLong")).required(n("warningRequired")),description:P.c()});return Object(x.jsx)(N.a,{initialValues:{name:"",description:""},validationSchema:i,onSubmit:function(e){t({name:e.name,description:e.description})},children:function(e){var t=e.handleSubmit,i=e.handleChange,a=e.values,r=e.errors;return Object(x.jsxs)(L.a,{noValidate:!0,onSubmit:t,children:[Object(x.jsxs)(L.a.Group,{md:"6",controlId:"name",children:[Object(x.jsx)(L.a.Label,{children:n("addDifferential")}),Object(x.jsx)(L.a.Control,{type:"text",name:"name",placeholder:n("write"),value:a.name,onChange:i,isInvalid:!!r.name}),Object(x.jsx)(L.a.Control.Feedback,{type:"invalid",role:"alert","aria-label":"from feedback",children:r.name})]}),Object(x.jsxs)(L.a.Group,{className:"mb-3",controlId:"description",children:[Object(x.jsx)(L.a.Label,{children:n("description")}),Object(x.jsx)(L.a.Control,{as:"textarea",name:"description",rows:3,value:a.description,onChange:i})]}),Object(x.jsx)(E.a,{type:"submit",children:n("buttonSubmitNewDifferential")})]})}})},Oe=n(134),me=function(e){var t=e.differentials,n=e.selectDifferential,a=e.diffGroupCaseId,r=Object(b.a)().t,c=Object(i.useState)([]),s=Object(o.a)(c,2),d=s[0],l=s[1],u=Object(i.useState)(""),j=Object(o.a)(u,2),f=j[0],h=j[1];return Object(x.jsxs)(L.a,{onSubmit:function(e){e.preventDefault();var i=t.filter((function(e){return e.name===d[0]}))[0];n({diffGroupCaseId:a,differentialId:i.id,description:f}),h(""),l([])},children:[Object(x.jsxs)(L.a.Group,{children:[Object(x.jsx)(L.a.Label,{children:r("selectExistingDifferential")}),Object(x.jsx)(Oe.a,{id:"basic-typeahead-single",labelKey:"name",options:t.map((function(e){return e.name})),placeholder:r("selectDifferential"),onChange:l,selected:d})]}),Object(x.jsxs)(L.a.Group,{className:"mb-3",controlId:"description",children:[Object(x.jsx)(L.a.Label,{children:r("description")}),Object(x.jsx)(L.a.Control,{as:"textarea",name:"description",rows:3,value:f,onChange:function(e){return h(e.target.value)}})]}),Object(x.jsx)(E.a,{type:"submit",children:r("buttonSubmitNewDifferential")})]})},xe=function(e){var t=e.diffGroupCaseId,n=Object(b.a)().t,r=Object(i.useState)(!1),c=Object(o.a)(r,2),s=c[0],d=c[1],l=Object(i.useState)([]),u=Object(o.a)(l,2),j=u[0],f=u[1];a.a.useEffect((function(){be().then((function(e){f(e)})).catch((function(e){console.log(e)}))}),[]);var h=function(){return d(!s)},p=function(e){z(e).then((function(){h(),F(n("differentialUpdateSuccess"))})).catch((function(e){console.log(e),h(),R(n("differentialUpdateError"))}))};return Object(x.jsxs)("div",{id:"newDifferential",children:[Object(x.jsx)(E.a,{variant:"primary",onClick:h,id:"addNew",children:n("buttonNewDifferential")}),Object(x.jsxs)(G.a,{show:s,onHide:h,backdrop:"static",keyboard:!1,children:[Object(x.jsx)(G.a.Header,{closeButton:!0,children:Object(x.jsx)(G.a.Title,{children:n("addDifferential")})}),Object(x.jsx)(G.a.Body,{children:Object(x.jsxs)(ue.a,{defaultActiveKey:"select",id:"differentials",className:"mb-3",children:[Object(x.jsx)(je.a,{eventKey:"select",title:n("selectExisting"),children:Object(x.jsx)(me,{differentials:j,selectDifferential:p,diffGroupCaseId:t})}),Object(x.jsx)(je.a,{eventKey:"add",title:n("addNewDifferential2"),children:Object(x.jsx)(pe,{addDifferential:function(e){he({name:e.name}).then((function(n){var i=n[0].id;p({diffGroupCaseId:t,differentialId:i,description:e.description})}))}})})]})})]})]})},ge=function(e){var t=e.diffGroupCaseId,n=e.name,i=e.admin;return Object(x.jsxs)(V.a,{style:{width:"60rem"},children:[Object(x.jsx)(V.a.Header,{children:n}),Object(x.jsxs)(V.a.Body,{children:[Object(x.jsx)(le,{diffGroupCaseId:t}),i&&Object(x.jsx)(xe,{diffGroupCaseId:t})]})]})},ve=function(e){var t=e.caseId,n=e.admin,r=Object(i.useState)([]),c=Object(o.a)(r,2),s=c[0],d=c[1];return a.a.useEffect((function(){ce(t).then((function(e){d(e)})).catch((function(e){console.log(e)}))}),[]),Object(x.jsx)("div",{"data-testid":"diffGroupList",children:s.map((function(e){return Object(x.jsx)(ge,{diffGroupCaseId:e.diffGroupCaseId,name:e.name,admin:n},e.id)}))})},ye="http://localhost:8081/api/differentialGroups",Ce=function(){return y.a.get(ye).then((function(e){return e.data}))},Se=function(e){return y.a.post(ye,e).then((function(e){return e.data}))},we=function(e){var t=e.addDifferentialGroup,n=Object(b.a)().t,i=P.b().shape({name:P.c().min(2,n("warningShort")).max(999,n("warningLong")).required(n("warningRequired"))});return Object(x.jsx)(N.a,{initialValues:{name:""},validationSchema:i,onSubmit:function(e){t({name:e.name})},children:function(e){var t=e.handleSubmit,i=e.handleChange,a=e.values,r=e.errors;return Object(x.jsxs)(L.a,{noValidate:!0,onSubmit:t,children:[Object(x.jsxs)(L.a.Group,{md:"6",controlId:"name",children:[Object(x.jsx)(L.a.Label,{children:n("addDifferentialGroup")}),Object(x.jsx)(L.a.Control,{type:"text",name:"name",placeholder:n("write"),value:a.name,onChange:i,isInvalid:!!r.name}),Object(x.jsx)(L.a.Control.Feedback,{type:"invalid",role:"alert","aria-label":"from feedback",children:r.name})]}),Object(x.jsx)(E.a,{type:"submit",children:n("buttonSubmitNewDifferentialGroup")})]})}})},De=function(e){var t=e.differentialGroups,n=e.selectDifferentialGroup,a=e.caseId,r=Object(b.a)().t,c=Object(i.useState)([]),s=Object(o.a)(c,2),d=s[0],l=s[1];return Object(x.jsxs)(L.a,{onSubmit:function(e){e.preventDefault();var i=t.filter((function(e){return e.name===d[0]}))[0];n({caseId:a,differentialGroupId:i.id}),l([])},children:[Object(x.jsxs)(L.a.Group,{children:[Object(x.jsx)(L.a.Label,{children:r("selectExistingDifferentialGroup")}),Object(x.jsx)(Oe.a,{id:"basic-typeahead-single",labelKey:"name",options:t.map((function(e){return e.name})),placeholder:r("selectDifferentialGroup"),onChange:l,selected:d})]}),Object(x.jsx)(E.a,{type:"submit",children:r("buttonSubmitNewDifferentialGroup")})]})},ke=function(e){var t=e.caseId,n=Object(b.a)().t,r=Object(i.useState)(!1),c=Object(o.a)(r,2),s=c[0],d=c[1],l=Object(i.useState)([]),u=Object(o.a)(l,2),j=u[0],f=u[1];a.a.useEffect((function(){Ce().then((function(e){f(e)})).catch((function(e){console.log(e)}))}),[]);var h=function(){return d(!s)},p=function(e){se(e).then((function(){h(),F(n("differentialGroupUpdateSuccess"))})).catch((function(e){console.log(e),h(),R(n("differentialGroupUpdateError"))}))};return Object(x.jsxs)("div",{children:[Object(x.jsx)(E.a,{variant:"primary",onClick:h,id:"addNew",children:n("buttonNewDifferentialGroup")}),Object(x.jsxs)(G.a,{show:s,onHide:h,backdrop:"static",keyboard:!1,children:[Object(x.jsx)(G.a.Header,{closeButton:!0,children:Object(x.jsx)(G.a.Title,{children:n("addDifferentialGroup")})}),Object(x.jsx)(G.a.Body,{children:Object(x.jsxs)(ue.a,{defaultActiveKey:"select",id:"differentialGroups",className:"mb-3",children:[Object(x.jsx)(je.a,{eventKey:"select",title:n("selectExisting"),children:Object(x.jsx)(De,{differentialGroups:j,selectDifferentialGroup:p,caseId:t})}),Object(x.jsx)(je.a,{eventKey:"add",title:n("addNewDifferential2"),children:Object(x.jsx)(we,{addDifferentialGroup:function(e){Se({name:e.name}).then((function(e){var n=e[0].id;p({caseId:t,differentialGroupId:n})}))}})})]})})]})]})},Ie=function(e){var t=e.admin,n=e.caseId,i=Object(b.a)().t;return Object(x.jsxs)("div",{children:[Object(x.jsx)("h2",{children:i("Differentials")}),t&&Object(x.jsx)("div",{children:Object(x.jsx)(ke,{caseId:n})}),Object(x.jsx)(ve,{caseId:n,admin:t})]})},Te=function(e){var t=e.c,n=e.hideCase,a=Object(b.a)().t,r=Object(i.useState)(t.hidden),c=Object(o.a)(r,2),s=c[0],d=c[1];return Object(x.jsx)("div",{children:Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n({title:t.title,anamnesis:t.anamnesis,hidden:s})},className:"buttonLeft",children:[Object(x.jsx)("label",{htmlFor:"submit",className:"hidden",children:a(s?"buttonShowCaseToStudents":"buttonHideCaseFromStudents")}),Object(x.jsx)("input",{type:"submit",onClick:function(){d(!s)},id:"submit",value:a(s?"buttonShowCaseToStudents":"buttonHideCaseFromStudents")})]})})},Ee=function(e){var t=e.c,n=e.updateCaseTitle,a=Object(b.a)().t,r=Object(i.useState)(t.title),c=Object(o.a)(r,2),s=c[0],d=c[1],l=P.b().shape({title:P.c().min(2,a("warningShort")).max(999,a("warningLong")).required(a("warningRequired"))});return Object(x.jsx)(N.a,{initialValues:{title:s},validationSchema:l,onSubmit:function(e){n({title:e.title,anamnesis:t.anamnesis,hidden:t.hidden}),d(e.title)},children:function(e){var t=e.handleSubmit,n=e.handleChange,i=e.values,r=e.errors;return Object(x.jsx)(L.a,{noValidate:!0,onSubmit:t,children:Object(x.jsxs)(L.a.Group,{className:"mb-3",controlId:"updateTitle",style:{width:"30rem"},children:[Object(x.jsx)(L.a.Control,{type:"text",name:"title",value:i.title,onChange:n,isInvalid:!!r.title}),Object(x.jsx)(L.a.Text,{className:"text-muted",children:a("caseTitleInstruction")}),Object(x.jsx)(L.a.Control.Feedback,{type:"invalid",role:"alert","aria-label":"from feedback",children:r.title})]})})}})},Ge=function(e){var t=e.c,n=e.admin,a=Object(b.a)().t,r=Object(i.useState)(t),c=Object(o.a)(r,2),s=c[0],d=c[1],l=function(e){D(t.id,e).then((function(){d(e),F(a("caseUpdateSuccess"))})).catch((function(e){console.log(e),R(a("caseUpdateError"))}))};return Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"Casen tiedot l\xf6ytyv\xe4t t\xe4\xe4lt\xe4"}),n&&Object(x.jsxs)("div",{children:[Object(x.jsx)(Ee,{c:s,updateCaseTitle:l}),Object(x.jsx)(Te,{c:s,hideCase:l})]}),!n&&Object(x.jsx)("p",{children:s.title}),Object(x.jsx)("p",{children:s.anamnesis})]})},Ne=n(154),Pe=n.n(Ne),Le=n(198),Ue="http://localhost:8081/api/procedures",Ae=function(e){return y.a.post(Ue,e).then((function(e){return e.data}))},Re=function(e){return y.a.get("".concat(Ue,"/").concat(e)).then((function(e){return e.data}))},Fe=function(e,t){return y.a.put("".concat(Ue,"/").concat(e),t)},Be=function(e){var t=e.id,n=e.addProcedureFunc,a=Object(b.a)().t,r=Object(i.useState)(""),c=Object(o.a)(r,2),s=c[0],d=c[1],l=function(){var e=Object(Le.a)(Pe.a.mark((function e(i){var r,c;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.preventDefault(),r={title:s},null==n){e.next=6;break}n(r),e.next=11;break;case 6:return e.next=8,Ae(r).then((function(e){return d(""),F(a("procedureAddSuccess")),e.id})).catch((function(e){console.log(e),R(a("procedureAddError"))}));case 8:c=e.sent,$({caseId:t,procedureId:c,priority:1});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{children:[Object(x.jsx)("h2",{children:a("addProcedure")}),Object(x.jsxs)("form",{onSubmit:l,children:[Object(x.jsxs)("p",{children:[Object(x.jsx)("label",{htmlFor:"title",children:a("procedureTitle")}),Object(x.jsx)("br",{}),Object(x.jsx)("input",{id:"title",type:"text",value:s,onChange:function(e){d(e.target.value)}})]}),Object(x.jsx)("p",{children:Object(x.jsx)("input",{type:"submit",id:"submit",value:a("buttonSubmitNewProcedure")})})]})]})},He=n(28),Ve=function(e){var t=e.procedure,n=e.editProcedureFunc,a=Object(i.useState)(t.proceduresUnderCase.priority),r=Object(o.a)(a,2),c=(r[0],r[1]),s=Object(i.useState)(t.title),l=Object(o.a)(s,2),u=(l[0],l[1]),j=Object(b.a)().t,f=Object(d.f)();return Object(x.jsxs)("div",{id:"wrapper",children:[Object(x.jsx)("h2",{children:j("editProcedure")}),Object(x.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),u(e.target[0].value),c(e.target[1].value);var i={caseId:t.proceduresUnderCase.caseId,procedureId:t.proceduresUnderCase.procedureId,priority:e.target[1].value},a={title:e.target[0].value};null!=n&&n(i),Fe(t.id,a),Q(t.id,i),null==n&&f.push("/")}(e)},children:[Object(x.jsxs)("p",{children:[Object(x.jsx)("label",{htmlFor:"title",children:j("procedureTitle")}),Object(x.jsx)("br",{}),Object(x.jsx)("input",{id:"title",type:"text",defaultValue:t.title,onChange:function(e){u(e.target.value)}})]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("label",{htmlFor:"priority",children:j("procedurePriority")}),Object(x.jsx)("br",{}),Object(x.jsx)("input",{id:"priority",type:"integer",onChange:function(e){c(e.target.value)},defaultValue:t.proceduresUnderCase.priority})]}),Object(x.jsx)("p",{children:Object(x.jsx)("input",{type:"submit",id:"submit",value:j("buttonEdit")})})]})]},t.proceduresUnderCase.priority)},Ke=function(e){var t=e.proceduresHook,n=e.handleDragStart,i=e.handleDragEnd,a=e.handleDragEnter,r=e.t,c=e.submitForm;return t&&t.map((function(e,t){return Object(x.jsx)("h4",{onDragStart:function(e){return n(e,t)},onDragEnd:function(){return i()},onDragEnter:function(e){return a(e,t)},draggable:!0,children:Object(x.jsxs)("div",{children:[Object(x.jsxs)(E.a,{className:"procedureButton",children:[" ",e.proceduresUnderCase.priority," ",e.title," "]}),Object(x.jsx)("form",{onSubmit:function(t){return c(e,t)},className:"handleEdits",children:Object(x.jsx)(E.a,{type:"submit",className:"editButton",size:"sm",children:r("buttonEdit")},t)})]})},t)}))},qe=function(e){var t=e.id,n=Object(b.a)().t,a=Object(i.useRef)(),r=Object(i.useRef)(),c=Object(i.useState)([]),s=Object(o.a)(c,2),d=s[0],l=s[1],u=Object(i.useState)(null),j=Object(o.a)(u,2),f=j[0],h=j[1];Object(i.useEffect)((function(){Re(t).then((function(e){var t=e[0].procedures;t.sort((function(e,t){return e.proceduresUnderCase.priority-t.proceduresUnderCase.priority})),l(t)}))}),[]);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Ke,{proceduresHook:d,handleDragStart:function(e,t){a.current=t},handleDragEnd:function(){d.map((function(e,t){return function(e,t){var n={caseId:e.proceduresUnderCase.caseId,procedureId:e.proceduresUnderCase.procedureId,priority:t+1};Q(e.proceduresUnderCase.procedureId,n)}(e,t)}))},handleDragEnter:function(e,t){r.current=t;var n=Object(He.a)(d),i=n[a.current];n.splice(a.current,1),n.splice(r.current,0,i),a.current=r.current,r.current=null,l(n)},t:n,submitForm:function(e,t){t.preventDefault(),function(e){h(e)}(e)}}),f?Object(x.jsx)(Ve,{procedure:f}):Object(x.jsx)("p",{children:" "})]})},Me=function(e){var t=e.id;return Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"Toimenpiteet l\xf6ytyv\xe4t t\xe4\xe4lt\xe4"}),Object(x.jsx)(Be,{id:t}),Object(x.jsx)(qe,{id:t})]})},We=function(e){var t=e.cases,n=e.admin,i=Object(b.a)().t,a=Object(d.g)().id,r=t.find((function(e){return e.id===Number(a)})),c="/cases/".concat(a);return Object(x.jsx)(s.a,{children:Object(x.jsxs)("div",{id:"wrapper",children:[Object(x.jsx)(E.a,{as:s.b,to:c,children:i("caseAnamnesis")}),Object(x.jsx)(E.a,{as:s.b,to:"".concat(c,"/procedures"),children:i("caseProcedures")}),Object(x.jsx)(E.a,{as:s.b,to:"".concat(c,"/differentials"),children:i("caseDifferentials")}),Object(x.jsxs)(d.c,{children:[Object(x.jsx)(d.a,{path:"".concat(c,"/procedures"),children:Object(x.jsx)(Me,{id:a})}),Object(x.jsx)(d.a,{path:"".concat(c,"/differentials"),children:Object(x.jsx)(Ie,{admin:n,caseId:a})}),Object(x.jsx)(d.a,{path:c,children:Object(x.jsx)(Ge,{c:r,admin:n})})]})]})})},ze=function(){var e=Object(i.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(i.useState)(!1),l=Object(o.a)(c,2),u=l[0],j=l[1],f=Object(i.useState)(!0),b=Object(o.a)(f,2),h=b[0],p=b[1],O=Object(i.useState)([]),m=Object(o.a)(O,2),v=m[0],y=m[1];return a.a.useEffect((function(){S().then((function(e){y(e)})).catch((function(e){console.log(e)}))}),[]),Object(x.jsxs)(s.a,{children:[Object(x.jsx)(g,{user:n,admin:u,guest:h,changeUser:function(){r(!0),p(!1),j(!1)},changeAdmin:function(){r(!1),p(!1),j(!0)},changeGuest:function(){r(!1),p(!0),j(!1)},cases:v}),h?" ":Object(x.jsx)(ne,{}),Object(x.jsx)(B,{}),Object(x.jsxs)(d.c,{children:[Object(x.jsx)(d.a,{path:"/howtoplay",children:Object(x.jsx)(ie,{})}),Object(x.jsx)(d.a,{path:"/profile",children:Object(x.jsx)(ae,{})}),Object(x.jsx)(d.a,{path:"/cases/:id",children:Object(x.jsx)(We,{cases:v,admin:u})}),u&&Object(x.jsx)(d.a,{path:"/editcase/:id",children:Object(x.jsx)(Te,{cases:v})}),Object(x.jsx)(d.a,{path:"/",children:h?Object(x.jsx)(te,{}):Object(x.jsx)(ee,{admin:u,cases:v})})]})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(x.jsx)(s.a,{children:Object(x.jsx)(ze,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[342,1,2]]]);
//# sourceMappingURL=main.d330b03c.chunk.js.map