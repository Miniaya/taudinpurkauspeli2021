(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{206:function(e,t,n){},208:function(e){e.exports=JSON.parse('{"addCase":"Lis\xe4\xe4 case","addDifferential":"Lis\xe4\xe4 caseen uusi diffi","addNewDifferential":"Lis\xe4\xe4 uusi...","addNewDifferential2":"Luo uusi","selectDifferential":"Valitse diffi...","addProcedure":"Lis\xe4\xe4 toimenpide","addDisease":"Lis\xe4\xe4 tauti","buttonEdit":"Muokkaa","buttonHideCaseFromStudents":"Piilota case opiskelijoilta","buttonShowCaseToStudents":"N\xe4yt\xe4 case opiskelijoille","buttonNewCase":"+ Lis\xe4\xe4 uusi case","buttonNewDifferential":"Lis\xe4\xe4 uusi diffi","buttonPlay":"Pelaa","buttonRemove":"Poista","buttonRemoveAll":"Poista kaikki","buttonSaveDifferential":"Tallenna diffi","buttonSearch":"Etsi","buttonSelectCase":"Valitse case:","buttonSubmitNewCase":"Lis\xe4\xe4 case","buttonSubmitNewDifferential":"Lis\xe4\xe4","buttonSubmitNewDisease":"Lis\xe4\xe4","buttonSubmitNewProcedure":"Lis\xe4\xe4 toimenpide","buttonUpdate":"P\xe4ivit\xe4","caseAnamnesis":"Anamneesi","caseDifferentials":"Diffit","caseHidden":"Opiskelijoilta piilotetut caset","casePlayable":"Pelattavissa olevat caset","caseProcedures":"Toimenpiteet","caseTitle":"Casen nimi","caseUpdateSuccess":"Case p\xe4ivitetty onnistuneesti","caseTitleInstruction":"Muokattuasi otsikkoa, paina Enteria tallentaaksesi muutokset","cases":"Caset","category":"Kategoria","chooseDifferential":"Valitse diffi","clickTheDisease":"Klikkaa tautia","copy":"Kopioi","description":"Kuvaus","deleteCaseConfirmation":"Haluatko varmasti poistaa t\xe4m\xe4n casen?","Differentials":"Diffit","differentialUpdateSuccess":"Diffi lis\xe4tty onnistuneesti","differentialUpdateError":"VIRHE! Valittu diffi on jo aiemmin lis\xe4tty caseen.","disease":"Tauti","diseaseAdded":"Tauti lis\xe4tty","diseases":"Taudit","edit":"Muokkaa","editCase":"Edit case","editProcedure":"Muokkaa toimenpidett\xe4","fileBank":"Tiedostopankki","frontpageTitle":"Etusivu","frontpageText":"Tervetuloa! \\n\\n Valitse alta case, jota haluat pelata. Peliohjeet l\xf6ytyv\xe4t navigointipalkista.","guest":"vierailija","GuestFrontpageText":"T\xe4m\xe4 on el\xe4inl\xe4\xe4ketieteellisen tiedekunnan epidemiologian kurssin taudinpurkauspelin etusivu. \\n Peliohjeet l\xf6ytyv\xe4t peliohjeet-linkin takaa. Mik\xe4li haluat pelata peli\xe4, kirjaudu sis\xe4\xe4n yliopiston k\xe4ytt\xe4j\xe4tunnuksilla!","GuestFrontpageTitle":"Tervetuloa taudinpurkauspelin pariin!","hideCase":"Piilota opiskelijoilta","howToPlay":"Peliohjeet","languageEnglish":"English","languageFinnish":"Suomi","listOfDiseases":"Tautilista","logIn":"Kirjaudu sis\xe4\xe4n","logOut":"Kirjaudu ulos","nameOfTheGame":"Taudinpurkauspeli","noDifferentialsYet":"Ei viel\xe4 diffej\xe4","procedurePriority":"Toimenpiteen t\xe4rkeysaste","procedureTitle":"Toimenpiteen nimi","searchByTitle":"Etsi nimell\xe4","selectLanguage":"Valitse kieli","selectExistingDifferential":"Hae olemassaolevaa diffi\xe4","selectExisting":"Valitse valikosta","selectUser":"Valitse k\xe4ytt\xe4j\xe4muoto","student":"opiskelija","teacher":"opettaja","title":"Nimi","userInformation":"K\xe4ytt\xe4jien seuranta","userProfile":"K\xe4ytt\xe4j\xe4tiedot","warningShort":"Liian lyhyt","warningLong":"Liian pitk\xe4","warningRequired":"Vaadittu tieto","write":"Kirjoita..."}')},209:function(e){e.exports=JSON.parse('{"addCase":"Add case","addDifferential":"Add new differential to case","addNewDifferential":"Add new...","addNewDifferential2":"Create new","selectDifferential":"Select differential...","addProcedure":"Add procedure","addDisease":"Add disease","buttonEdit":"Edit","buttonHideCaseFromStudents":"Hide case from students","buttonShowCaseToStudents":"Show case to students","buttonNewCase":"+ Add new case","buttonNewDifferential":"Add new differential","buttonPlay":"Play","buttonRemove":"Remove","buttonRemoveAll":"Remove all","buttonSaveDifferential":"Save differential","buttonSearch":"Search","buttonSelectCase":"Select case:","buttonSubmitNewCase":"Add case","buttonSubmitNewDifferential":"Submit","buttonSubmitNewDisease":"Submit","buttonSubmitNewProcedure":"Add procedure","buttonUpdate":"Update","caseAnamnesis":"Anamnesis","caseDifferentials":"Differentials","caseHidden":"Cases hidden from students","casePlayable":"Playable cases","caseProcedures":"Procedures","caseTitle":"Case title","caseTitleInstruction":"After editing the title, press Enter to save","caseUpdateSuccess":"Case updated successfully","cases":"Cases","category":"Category","chooseDifferential":"Choose differential","clickTheDisease":"Click the disease","copy":"Copy","description":"Description","deleteCaseConfirmation":"Are you sure you want to delete this case?","Differentials":"Differentials","differentialUpdateSuccess":"Differential was added succesfully","differentialUpdateError":"ERROR! The differential already exists in this case.","disease":"Disease","diseases":"Diseases","diseaseAdded":"Disease added","edit":"Edit","editCase":"Edit case","editProcedure":"Edit procedure","fileBank":"Filebank","frontpageText":"Welcome! \\n \\n Select the case you want to play. The game instructions can be found in navigation bar.","frontpageTitle":"Front page","guest":"guest","GuestFrontpageText":"This is the veterinary faculty\'s epidemiology courses taudinpurkaus-games frontpage. \\n The instructions can be found behind the game instructions link. If you want to play the game, sign in with your university log-in details!","GuestFrontpageTitle":"Welcome to Taudinpurkauspeli!","hideCase":"Hide from students","howToPlay":"How to play","languageEnglish":"English","languageFinnish":"Suomi","listOfDiseases":"List of diseases","logIn":"Log in","logOut":"Log out","nameOfTheGame":"Taudinpurkauspeli","noDifferentialsYet":"No differentials yet","procedurePriority":"Procedure priority","procedureTitle":"Procedure title","searchByTitle":"Search by title","selectExisting":"Select existing","selectExistingDifferential":"Select an existing differential","selectLanguage":"Select language","selectUser":"Select user in charge","student":"student","teacher":"teacher","title":"Title","userInformation":"Users","userProfile":"Profile","warningShort":"Too short","warningLong":"Too long","warningRequired":"Required information","write":"Write..."}')},341:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(48),c=n.n(s),r=n(17),o=n(11),l=(n(206),n(207),n(20)),d=n(356),u=n(199),j=n(354),b=n(83),f=n(358),h=n(96),O=n(95),p=n(186);h.a.use(p.a).init(),h.a.use(O.e).init({fallbackLng:"fi",lng:localStorage.getItem("i18nextLng")||"fi",resources:{fi:{translations:n(208)},en:{translations:n(209)}},ns:["translations"],defaultNS:"translations"}),h.a.languages=["fi","en"];var m=h.a,x=n(1),g=function(e){var t=e.user,n=e.admin,a=e.guest,i=e.changeUser,s=e.changeAdmin,c=e.changeGuest,o=Object(f.a)().t,l=function(e){m.changeLanguage(e)};return Object(x.jsxs)(d.a,{collapseOnSelect:!0,expand:"lg",variant:"dark",sticky:"top",children:[Object(x.jsx)(d.a.Brand,{as:r.b,to:"/",children:o("nameOfTheGame")}),Object(x.jsx)(d.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(x.jsx)(d.a.Collapse,{id:"responsive-navbar-nav",children:Object(x.jsxs)(u.a,{className:"ml-auto",children:[Object(x.jsxs)(j.a,{title:o("selectUser"),children:[Object(x.jsx)(j.a.Item,{onClick:function(){return c()},eventKey:"guest",children:o("guest")}),Object(x.jsx)(j.a.Item,{onClick:function(){return i()},eventKey:"student",children:o("student")}),Object(x.jsx)(j.a.Item,{onClick:function(){return s()},eventKey:"teacher",children:o("teacher")})]}),Object(x.jsxs)(j.a,{title:o("selectLanguage"),children:[Object(x.jsx)(j.a.Item,{onClick:function(){return l("fi")},eventKey:"fi",children:o("languageFinnish")}),Object(x.jsx)(j.a.Item,{onClick:function(){return l("en")},eventKey:"en",children:o("languageEnglish")})]}),n&&Object(x.jsx)(u.a.Item,{children:Object(x.jsx)(b.a,{as:r.b,to:"/users",children:o("userInformation")})}),n&&Object(x.jsx)(u.a.Item,{children:Object(x.jsx)(b.a,{as:r.b,to:"/files",children:o("fileBank")})}),(t||a||n)&&Object(x.jsx)(u.a.Item,{children:Object(x.jsx)(b.a,{as:r.b,to:"/howtoplay",children:o("howToPlay")})}),t&&Object(x.jsx)(u.a.Item,{children:Object(x.jsx)(b.a,{as:r.b,to:"/profile",children:o("userProfile")})}),Object(x.jsx)(u.a.Item,{children:t||n?Object(x.jsx)(b.a,{as:r.b,to:"/logout",children:o("logOut")}):Object(x.jsx)(b.a,{as:r.b,to:"/login",children:o("logIn")})})]})})]})},v=n(19),y=n.n(v),S="http://localhost:8080/api/cases",C=function(){return y.a.get(S).then((function(e){return e.data}))},w=function(e){return y.a.post(S,e).then((function(e){return e.data}))},k=function(e,t){return y.a.put("".concat(S,"/").concat(e),t)},T=function(e){return y.a.delete("".concat(S,"/").concat(e)).then((function(e){return e.data}))},D=n(188),I=n(349),N=n(189),P=n(359),E=n(348),L=function(e){var t=e.caseToBeRemoved,n=e.removeCaseFunc,a=Object(f.a)().t;return Object(x.jsx)(D.a,{className:"removeButton",size:"sm",variant:"danger",onClick:function(e){(e.preventDefault(),null!=n)?(n(t.id),t.id=null,n(t.id)):!0===window.confirm(a("deleteCaseConfirmation"))&&T(t.id).then((function(e){return e.message}))},children:a("buttonRemove")})},F=function(e){var t=e.c,n=e.admin,a=Object(f.a)().t;return Object(x.jsxs)("div",{children:[Object(x.jsxs)(P.a,{as:r.b,to:"/cases/".concat(t.id),style:{width:"20rem",cursor:"pointer"},className:"caseCard",children:[Object(x.jsxs)(P.a.Body,{children:[Object(x.jsx)(P.a.Title,{children:t.title}),Object(x.jsx)(P.a.Text,{children:t.anamnesis})]}),Object(x.jsx)(P.a.Footer,{children:Object(x.jsx)(E.a,{className:"progsbar",variant:"success",now:25,label:"".concat(25,"%")})})]}),n&&Object(x.jsxs)("div",{className:"cardButtons",children:[Object(x.jsx)(D.a,{as:r.b,to:"/cases/".concat(t.id),className:"editButton",size:"sm",children:a("buttonEdit")}),Object(x.jsx)(D.a,{className:"copyButton",size:"sm",variant:"warning",children:a("copy")}),Object(x.jsx)(L,{caseToBeRemoved:t})]})]})},U=function(e){var t=e.newSearch,n=e.searchCases,a=Object(f.a)().t;return Object(x.jsx)("div",{children:Object(x.jsxs)("label",{htmlFor:"search",children:[a("searchByTitle"),"\xa0",Object(x.jsx)("input",{id:"search",value:t,onChange:n})]})})},A=function(e){var t=e.cases,n=e.admin,i=Object(f.a)().t,s=Object(a.useState)(""),c=Object(o.a)(s,2),l=c[0],d=c[1],u=l?t.filter((function(e){return e.title.toLowerCase().includes(l.toLowerCase())})):t;return Object(x.jsxs)("div",{id:"wrapper",children:[Object(x.jsx)("h2",{children:i("frontpageTitle")}),Object(x.jsx)("p",{children:i("frontpageText")}),Object(x.jsx)(U,{newSearch:l,searchCases:function(e){d(e.target.value)}}),Object(x.jsx)("br",{}),n&&Object(x.jsxs)("div",{children:[Object(x.jsx)(D.a,{as:r.b,to:"/newcase",children:i("buttonNewCase")}),Object(x.jsx)("br",{}),Object(x.jsx)("h3",{children:i("caseHidden")}),Object(x.jsx)("hr",{})]}),Object(x.jsx)(I.a,{xs:"auto",md:"auto",className:"g-4",children:n&&u.filter((function(e){return e.hidden})).map((function(e){return Object(x.jsx)(N.a,{children:Object(x.jsx)(F,{c:e,admin:n})},e.id)}))}),Object(x.jsx)("br",{}),Object(x.jsx)("h3",{children:i("casePlayable")}),Object(x.jsx)("hr",{}),Object(x.jsx)(I.a,{xs:"auto",md:"auto",className:"g-4",children:u.filter((function(e){return!e.hidden})).map((function(e){return Object(x.jsx)(N.a,{children:Object(x.jsx)(F,{c:e,admin:n})},e.id)}))})]})},B=function(){var e=Object(f.a)().t;return Object(x.jsxs)("div",{id:"wrapper",children:[Object(x.jsx)("h2",{children:e("GuestFrontpageTitle")}),Object(x.jsx)("p",{children:e("GuestFrontpageText")})]})},R=function(){return Object(x.jsx)("div",{id:"sidebar"})},H=function(){var e=Object(f.a)().t;return Object(x.jsx)("div",{id:"wrapper",children:Object(x.jsx)("h2",{children:e("howToPlay")})})},K=function(){var e=Object(f.a)().t;return Object(x.jsx)("div",{id:"wrapper",children:Object(x.jsx)("h2",{children:e("userProfile")})})},G=n(350),V=n(353),q=n(351),M=n(352),W="http://localhost:8080/api/differentials",z=function(){return y.a.get(W).then((function(e){return e.data}))},J=function(e){return y.a.post(W,e).then((function(e){return e.data}))},Y="http://localhost:8080/api/differentialsUnderCases",$=function(e){return y.a.get("".concat(Y,"/").concat(e)).then((function(e){return e.data}))},Q=function(e){return y.a.post(Y,e).then((function(e){return e.data}))},X=n(81),Z=n(38),_=n(355),ee=function(e){var t=e.addDifferential,n=Object(f.a)().t,a=Z.b().shape({name:Z.c().min(2,n("warningShort")).max(999,n("warningLong")).required(n("warningRequired")),description:Z.c()});return Object(x.jsx)(X.a,{initialValues:{name:"",description:""},validationSchema:a,onSubmit:function(e){t({name:e.name,description:e.description})},children:function(e){var t=e.handleSubmit,a=e.handleChange,i=e.values,s=e.errors;return Object(x.jsxs)(_.a,{noValidate:!0,onSubmit:t,children:[Object(x.jsxs)(_.a.Group,{md:"6",controlId:"name",children:[Object(x.jsx)(_.a.Label,{children:n("addDifferential")}),Object(x.jsx)(_.a.Control,{type:"text",name:"name",placeholder:n("write"),value:i.name,onChange:a,isInvalid:!!s.name}),Object(x.jsx)(_.a.Control.Feedback,{type:"invalid",role:"alert","aria-label":"from feedback",children:s.name})]}),Object(x.jsxs)(_.a.Group,{className:"mb-3",controlId:"description",children:[Object(x.jsx)(_.a.Label,{children:n("description")}),Object(x.jsx)(_.a.Control,{as:"textarea",name:"description",rows:3,value:i.description,onChange:a})]}),Object(x.jsx)(D.a,{type:"submit",children:n("buttonSubmitNewDifferential")})]})}})},te=n(198),ne=function(e){var t=e.differentials,n=e.selectDifferential,i=e.caseId,s=Object(f.a)().t,c=Object(a.useState)([]),r=Object(o.a)(c,2),l=r[0],d=r[1],u=Object(a.useState)(""),j=Object(o.a)(u,2),b=j[0],h=j[1];return Object(x.jsxs)(_.a,{onSubmit:function(e){e.preventDefault();var a=t.filter((function(e){return e.name===l[0]}))[0];n({caseId:i,differentialId:a.id,description:b}),h(""),d([])},children:[Object(x.jsxs)(_.a.Group,{children:[Object(x.jsx)(_.a.Label,{children:s("selectExistingDifferential")}),Object(x.jsx)(te.a,{id:"basic-typeahead-single",labelKey:"name",options:t.map((function(e){return e.name})),placeholder:s("selectDifferential"),onChange:d,selected:l})]}),Object(x.jsxs)(_.a.Group,{className:"mb-3",controlId:"description",children:[Object(x.jsx)(_.a.Label,{children:s("description")}),Object(x.jsx)(_.a.Control,{as:"textarea",name:"description",rows:3,value:b,onChange:function(e){return h(e.target.value)}})]}),Object(x.jsx)(D.a,{type:"submit",children:s("buttonSubmitNewDifferential")})]})},ae=function(e){var t=e.caseId,n=Object(f.a)().t,s=Object(a.useState)(null),c=Object(o.a)(s,2),r=c[0],l=c[1],d=Object(a.useState)(null),u=Object(o.a)(d,2),j=u[0],b=u[1],h=Object(a.useState)(!1),O=Object(o.a)(h,2),p=O[0],m=O[1],g=Object(a.useState)([]),v=Object(o.a)(g,2),y=v[0],S=v[1];i.a.useEffect((function(){z().then((function(e){S(e)})).catch((function(e){console.log(e)}))}),[]);var C=function(){return m(!p)},w=function(e){Q(e).then((function(){return C(),l(n("differentialUpdateSuccess")),void setTimeout((function(){l(null)}),3e3)})).catch((function(e){return function(e){console.log(e),C(),b(n("differentialUpdateError")),setTimeout((function(){b(null)}),3e3)}(e)}))};return Object(x.jsxs)("div",{children:[null!==r&&Object(x.jsx)(G.a,{variant:"success",children:r}),null!==j&&Object(x.jsx)(G.a,{variant:"danger",children:j}),Object(x.jsx)(D.a,{variant:"primary",onClick:C,id:"addNew",children:n("buttonNewDifferential")}),Object(x.jsxs)(V.a,{show:p,onHide:C,backdrop:"static",keyboard:!1,children:[Object(x.jsx)(V.a.Header,{closeButton:!0,children:Object(x.jsx)(V.a.Title,{children:n("addDifferential")})}),Object(x.jsx)(V.a.Body,{children:Object(x.jsxs)(q.a,{defaultActiveKey:"select",id:"differentials",className:"mb-3",children:[Object(x.jsx)(M.a,{eventKey:"select",title:n("selectExisting"),children:Object(x.jsx)(ne,{differentials:y,selectDifferential:w,caseId:t})}),Object(x.jsx)(M.a,{eventKey:"add",title:n("addNewDifferential2"),children:Object(x.jsx)(ee,{addDifferential:function(e){J({name:e.name}).then((function(n){var a=n[0].id;w({caseId:t,differentialId:a,description:e.description})}))}})})]})})]})]})},ie=n(357),se=function(e){var t=e.id,n=e.name,a=e.description;return Object(x.jsxs)(P.a,{children:[Object(x.jsx)(ie.a.Toggle,{as:P.a.Header,eventKey:t,children:n}),Object(x.jsx)(ie.a.Collapse,{eventKey:t,children:Object(x.jsx)(P.a.Body,{children:a})})]})},ce=function(e){var t=e.caseId,n=Object(a.useState)([]),s=Object(o.a)(n,2),c=s[0],r=s[1];return i.a.useEffect((function(){$(t).then((function(e){r(e)})).catch((function(e){console.log(e)}))}),[]),Object(x.jsx)(ie.a,{children:c.map((function(e){return Object(x.jsx)(se,{id:e.id,name:e.name,description:e.description},e.id)}))})},re=function(e){var t=e.admin,n=e.caseId,a=Object(f.a)().t;return Object(x.jsxs)("div",{children:[Object(x.jsx)("h2",{children:a("Differentials")}),t&&Object(x.jsx)("div",{children:Object(x.jsx)(ae,{caseId:n})}),Object(x.jsx)(ce,{caseId:n})]})},oe=function(e){var t=e.caseToBeHidden,n=e.hideCaseFunc,i=t,s=!1;null==n&&(s=i.hidden);var c=Object(a.useState)(s),r=Object(o.a)(c,2),l=r[0],d=r[1],u=Object(f.a)().t;return Object(x.jsx)("div",{children:Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={title:i.title,anamnesis:i.anamnesis,hidden:l};null!=n?n(t):k(i.id,t)},className:"buttonLeft",children:[Object(x.jsx)("label",{htmlFor:"submit",className:"hidden",children:u(l?"buttonShowCaseToStudents":"buttonHideCaseFromStudents")}),Object(x.jsx)("input",{type:"submit",onClick:function(){d(!l)},id:"submit",value:u(l?"buttonShowCaseToStudents":"buttonHideCaseFromStudents")})]})})},le=function(e){var t=e.c,n=e.updateCaseTitle,i=Object(f.a)().t,s=Object(a.useState)(t.title),c=Object(o.a)(s,2),r=c[0],l=c[1],d=Z.b().shape({title:Z.c().min(2,i("warningShort")).max(999,i("warningLong")).required(i("warningRequired"))});return Object(x.jsx)(X.a,{initialValues:{title:r},validationSchema:d,onSubmit:function(e){n({title:e.title,anamnesis:t.anamnesis,hidden:t.hidden}),l(e.title)},children:function(e){var t=e.handleSubmit,n=e.handleChange,a=e.values,s=e.errors;return Object(x.jsx)(_.a,{noValidate:!0,onSubmit:t,children:Object(x.jsxs)(_.a.Group,{className:"mb-3",controlId:"updateTitle",children:[Object(x.jsx)(_.a.Control,{type:"text",name:"title",value:a.title,onChange:n,isInvalid:!!s.title}),Object(x.jsx)(_.a.Text,{className:"text-muted",children:i("caseTitleInstruction")}),Object(x.jsx)(_.a.Control.Feedback,{type:"invalid",role:"alert","aria-label":"from feedback",children:s.title})]})})}})},de=function(e){var t=e.c,n=e.admin,i=Object(f.a)().t,s=Object(a.useState)(null),c=Object(o.a)(s,2),r=c[0],l=c[1];return Object(x.jsxs)("div",{children:[null!==r&&Object(x.jsx)(G.a,{variant:"success",children:r}),Object(x.jsx)("p",{children:"Casen tiedot l\xf6ytyv\xe4t t\xe4\xe4lt\xe4"}),n&&Object(x.jsxs)("div",{children:[Object(x.jsx)(le,{c:t,updateCaseTitle:function(e){k(t.id,e),l(i("caseUpdateSuccess")),setTimeout((function(){l(null)}),3e3)}}),Object(x.jsx)(oe,{caseToBeHidden:t})]}),!n&&Object(x.jsx)("p",{children:t.title}),Object(x.jsx)("p",{children:t.anamnesis})]})},ue=n(153),je=n.n(ue),be=n(197),fe="http://localhost:8080/api/procedures",he=function(e){return y.a.post(fe,e).then((function(e){return e.data}))},Oe=function(e){return y.a.get("".concat(fe,"/").concat(e)).then((function(e){return e.data}))},pe=function(e,t){return y.a.put("".concat(fe,"/").concat(e),t)},me="http://localhost:8080/api/proceduresUnderCases",xe=function(e){return y.a.post(me,e).then((function(e){return e.data}))},ge=function(e,t){return y.a.put("".concat(me,"/").concat(e),t)},ve=function(e){var t=e.id,n=e.addProcedureFunc,i=Object(f.a)().t,s=Object(a.useState)(""),c=Object(o.a)(s,2),r=c[0],l=c[1],d=function(){var e=Object(be.a)(je.a.mark((function e(a){var i,s;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),i={title:r},null==n){e.next=6;break}n(i),e.next=11;break;case 6:return e.next=8,he(i).then((function(e){return l(""),e.id}));case 8:s=e.sent,xe({caseId:t,procedureId:s,priority:1});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{children:[Object(x.jsx)("h2",{children:i("addProcedure")}),Object(x.jsxs)("form",{onSubmit:d,children:[Object(x.jsxs)("p",{children:[Object(x.jsx)("label",{htmlFor:"title",children:i("procedureTitle")}),Object(x.jsx)("br",{}),Object(x.jsx)("input",{id:"title",type:"text",value:r,onChange:function(e){l(e.target.value)}})]}),Object(x.jsx)("p",{children:Object(x.jsx)("input",{type:"submit",id:"submit",value:i("buttonSubmitNewProcedure")})})]})]})},ye=n(27),Se=function(e){var t=e.procedure,n=e.editProcedureFunc,i=Object(a.useState)(t.proceduresUnderCase.priority),s=Object(o.a)(i,2),c=(s[0],s[1]),r=Object(a.useState)(t.title),d=Object(o.a)(r,2),u=(d[0],d[1]),j=Object(f.a)().t,b=Object(l.f)();return Object(x.jsxs)("div",{id:"wrapper",children:[Object(x.jsx)("h2",{children:j("editProcedure")}),Object(x.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),u(e.target[0].value),c(e.target[1].value);var a={caseId:t.proceduresUnderCase.caseId,procedureId:t.proceduresUnderCase.procedureId,priority:e.target[1].value},i={title:e.target[0].value};null!=n&&n(a),pe(t.id,i),ge(t.id,a),null==n&&b.push("/")}(e)},children:[Object(x.jsxs)("p",{children:[Object(x.jsx)("label",{htmlFor:"title",children:j("procedureTitle")}),Object(x.jsx)("br",{}),Object(x.jsx)("input",{id:"title",type:"text",defaultValue:t.title,onChange:function(e){u(e.target.value)}})]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("label",{htmlFor:"priority",children:j("procedurePriority")}),Object(x.jsx)("br",{}),Object(x.jsx)("input",{id:"priority",type:"integer",onChange:function(e){c(e.target.value)},defaultValue:t.proceduresUnderCase.priority})]}),Object(x.jsx)("p",{children:Object(x.jsx)("input",{type:"submit",id:"submit",value:j("buttonEdit")})})]})]},t.proceduresUnderCase.priority)},Ce=function(e){var t=e.proceduresHook,n=e.handleDragStart,a=e.handleDragEnd,i=e.handleDragEnter,s=e.t,c=e.submitForm;return t&&t.map((function(e,t){return Object(x.jsx)("h4",{onDragStart:function(e){return n(e,t)},onDragEnd:function(){return a()},onDragEnter:function(e){return i(e,t)},draggable:!0,children:Object(x.jsxs)("div",{children:[Object(x.jsxs)(D.a,{className:"procedureButton",children:[" ",e.proceduresUnderCase.priority," ",e.title," "]}),Object(x.jsx)("form",{onSubmit:function(t){return c(e,t)},className:"handleEdits",children:Object(x.jsx)(D.a,{type:"submit",className:"editButton",size:"sm",children:s("buttonEdit")},t)})]})},t)}))},we=function(e){var t=e.id,n=Object(f.a)().t,i=Object(a.useRef)(),s=Object(a.useRef)(),c=Object(a.useState)([]),r=Object(o.a)(c,2),l=r[0],d=r[1],u=Object(a.useState)(null),j=Object(o.a)(u,2),b=j[0],h=j[1];Object(a.useEffect)((function(){Oe(t).then((function(e){var t=e[0].procedures;t.sort((function(e,t){return e.proceduresUnderCase.priority-t.proceduresUnderCase.priority})),d(t)}))}),[]);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Ce,{proceduresHook:l,handleDragStart:function(e,t){i.current=t},handleDragEnd:function(){l.map((function(e,t){return function(e,t){var n={caseId:e.proceduresUnderCase.caseId,procedureId:e.proceduresUnderCase.procedureId,priority:t+1};ge(e.proceduresUnderCase.procedureId,n)}(e,t)}))},handleDragEnter:function(e,t){s.current=t;var n=Object(ye.a)(l),a=n[i.current];n.splice(i.current,1),n.splice(s.current,0,a),i.current=s.current,s.current=null,d(n)},t:n,submitForm:function(e,t){t.preventDefault(),function(e){h(e)}(e)}}),b?Object(x.jsx)(Se,{procedure:b}):Object(x.jsx)("p",{children:" "})]})},ke=function(e){var t=e.id;return Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"Toimenpiteet l\xf6ytyv\xe4t t\xe4\xe4lt\xe4"}),Object(x.jsx)(ve,{id:t}),Object(x.jsx)(we,{id:t})]})},Te=function(e){var t=e.cases,n=e.admin,a=Object(f.a)().t,i=Object(l.g)().id,s=t.find((function(e){return e.id===Number(i)})),c="/cases/".concat(i);return Object(x.jsx)(r.a,{children:Object(x.jsxs)("div",{id:"wrapper",children:[Object(x.jsx)(D.a,{as:r.b,to:c,children:a("caseAnamnesis")}),Object(x.jsx)(D.a,{as:r.b,to:"".concat(c,"/procedures"),children:a("caseProcedures")}),Object(x.jsx)(D.a,{as:r.b,to:"".concat(c,"/differentials"),children:a("caseDifferentials")}),Object(x.jsxs)(l.c,{children:[Object(x.jsx)(l.a,{path:"".concat(c,"/procedures"),children:Object(x.jsx)(ke,{id:i})}),Object(x.jsx)(l.a,{path:"".concat(c,"/differentials"),children:Object(x.jsx)(re,{admin:n,caseId:i})}),Object(x.jsx)(l.a,{path:c,children:Object(x.jsx)(de,{c:s,admin:n})})]})]})})},De=function(e){var t=e.addCaseFunc,n=Object(f.a)().t,a=Object(l.f)(),i=Z.b().shape({title:Z.c().min(2,n("warningShort")).max(999,n("warningLong")).required(n("warningRequired")),anamnesis:Z.c(),hidden:Z.a()});return Object(x.jsxs)("div",{id:"wrapper",children:[Object(x.jsx)("h2",{children:n("addCase")}),Object(x.jsx)(X.a,{initialValues:{title:"",anamnesis:"",hidden:!1},validationSchema:i,onSubmit:function(e){var n={title:e.title,anamnesis:e.anamnesis,hidden:e.hidden};void 0!==t?t(n):(w(n),a.push("/"))},children:function(e){var t=e.handleSubmit,a=e.handleChange,i=e.values,s=e.errors;return Object(x.jsxs)(_.a,{noValidate:!0,onSubmit:t,children:[Object(x.jsxs)(_.a.Group,{md:"6",controlId:"title",children:[Object(x.jsx)(_.a.Label,{children:n("caseTitle")}),Object(x.jsx)(_.a.Control,{type:"text",name:"title",value:i.title,onChange:a,isInvalid:!!s.title}),Object(x.jsx)(_.a.Control.Feedback,{type:"invalid",children:s.title})]}),Object(x.jsxs)(_.a.Group,{className:"mb-3",controlId:"anamnesis",children:[Object(x.jsx)(_.a.Label,{children:n("caseAnamnesis")}),Object(x.jsx)(_.a.Control,{as:"textarea",name:"anamnesis",rows:3,value:i.anamnesis,onChange:a})]}),Object(x.jsx)(_.a.Group,{className:"mb-3",controlId:"hidden",children:Object(x.jsx)(_.a.Check,{required:!0,name:"hidden",label:n("hideCase"),value:i.hidden,onChange:a})}),Object(x.jsx)(D.a,{type:"submit",children:n("buttonSubmitNewCase")})]})}})]})},Ie=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(!1),d=Object(o.a)(c,2),u=d[0],j=d[1],b=Object(a.useState)(!0),f=Object(o.a)(b,2),h=f[0],O=f[1],p=Object(a.useState)([]),m=Object(o.a)(p,2),v=m[0],y=m[1];return i.a.useEffect((function(){C().then((function(e){y(e)})).catch((function(e){console.log(e)}))}),[]),Object(x.jsxs)(r.a,{children:[Object(x.jsx)(g,{user:n,admin:u,guest:h,changeUser:function(){s(!0),O(!1),j(!1)},changeAdmin:function(){s(!1),O(!1),j(!0)},changeGuest:function(){s(!1),O(!0),j(!1)},cases:v}),h?" ":Object(x.jsx)(R,{}),Object(x.jsxs)(l.c,{children:[Object(x.jsx)(l.a,{path:"/howtoplay",children:Object(x.jsx)(H,{})}),Object(x.jsx)(l.a,{path:"/profile",children:Object(x.jsx)(K,{})}),Object(x.jsx)(l.a,{path:"/cases/:id",children:Object(x.jsx)(Te,{cases:v,admin:u})}),u&&Object(x.jsx)(l.a,{path:"/editcase/:id",children:Object(x.jsx)(oe,{cases:v})}),u&&Object(x.jsx)(l.a,{path:"/newcase",children:Object(x.jsx)(De,{})}),Object(x.jsx)(l.a,{path:"/",children:h?Object(x.jsx)(B,{}):Object(x.jsx)(A,{admin:u,cases:v})})]})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(x.jsx)(r.a,{children:Object(x.jsx)(Ie,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[341,1,2]]]);
//# sourceMappingURL=main.c36eaf13.chunk.js.map